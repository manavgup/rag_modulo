# RAG Modulo Environment Configuration Template
#
# ðŸš€ QUICK START:
# 1. Copy this file: cp .env.example .env
# 2. Run setup helper: make setup-env
# 3. Fill in the ðŸ” CRITICAL values below
# 4. Test with: make validate-env
#
# DO NOT commit .env to version control

# ================================
# ðŸ” CRITICAL SECRETS (Required - Get from team/docs)
# ================================
# Get JWT secret: openssl rand -hex 32
JWT_SECRET_KEY=generate_with_openssl_rand_hex_32

# Get from IBM Cloud > Watson AI > Credentials
WATSONX_APIKEY=get_from_ibm_cloud_watsonx_credentials
WATSONX_INSTANCE_ID=get_from_ibm_cloud_watsonx_service_details
WATSONX_URL=https://us-south.ml.cloud.ibm.com

# Get from https://platform.openai.com/api-keys
OPENAI_API_KEY=get_from_openai_platform_api_keys

# Get from https://console.anthropic.com/settings/keys
ANTHROPIC_API_KEY=get_from_anthropic_console_api_keys

# ================================
# PROJECT CONFIGURATION
# ================================
PROJECT_NAME=rag-modulo
PYTHON_VERSION=3.11

# ================================
# DATABASE CONFIGURATION
# ================================
COLLECTIONDB_USER=rag_modulo_user
COLLECTIONDB_PASS=rag_modulo_password
COLLECTIONDB_HOST=localhost
COLLECTIONDB_PORT=5433
COLLECTIONDB_NAME=rag_modulo

# ================================
# MINIO/S3 STORAGE (Required for Milvus)
# ================================
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin

# ================================
# MILVUS VECTOR DATABASE
# ================================
MILVUS_HOST=milvus-standalone
MILVUS_PORT=19530
MILVUS_USER=MILVUS_USER
MILVUS_PASSWORD=MILVUS_PASSWORD

# ================================
# AUTHENTICATION (OIDC)
# ================================
OIDC_DISCOVERY_ENDPOINT=https://prepiam.ice.ibmcloud.com/v1.0/endpoint/default/.well-known/openid-configuration
OIDC_AUTH_URL=https://prepiam.ice.ibmcloud.com/v1.0/endpoint/default/authorize
OIDC_TOKEN_URL=https://prepiam.ice.ibmcloud.com/v1.0/endpoint/default/token
OIDC_USERINFO_ENDPOINT=https://prepiam.ice.ibmcloud.com/v1.0/endpoint/default/userinfo
FRONTEND_URL=http://localhost:3000

# ================================
# IBM INTEGRATION
# ================================
IBM_CLIENT_ID=your_ibm_client_id_here
IBM_CLIENT_SECRET=your_ibm_client_secret_here

# ================================
# LLM CONFIGURATION
# ================================
LLM_PROVIDER=watsonx
RAG_LLM=ibm/granite-3-8b-instruct
MAX_NEW_TOKENS=500
MIN_NEW_TOKENS=200
TEMPERATURE=0.7
TOP_P=0.95
TOP_K=5
REPETITION_PENALTY=1.1

# ================================
# MLFLOW EXPERIMENT TRACKING
# ================================
MLFLOW_TRACKING_USERNAME=admin
MLFLOW_TRACKING_PASSWORD=password
MLFLOW_TRACKING_URI=http://rag-modulo-mlflow-server-1:5000

# ================================
# VECTOR DATABASE OPTIONS
# ================================
VECTOR_DB=milvus
EMBEDDING_MODEL=sentence-transformers/all-minilm-l6-v2
EMBEDDING_DIM=384

# ================================
# APPLICATION SETTINGS
# ================================
LOG_LEVEL=INFO
RUNTIME_EVAL=false
DATA_DIR=/path/to/your/data/directory

# ================================
# DEVELOPMENT/TESTING SETTINGS
# ================================
# When SKIP_AUTH=true, both backend and frontend bypass IBM OIDC Auth
# Mock user ID and token are still maintained for session purposes
SKIP_AUTH=false
MOCK_TOKEN=dev-0000-0000-0000

# ================================
# CHUNKING CONFIGURATION
# ================================
CHUNKING_STRATEGY=fixed
MIN_CHUNK_SIZE=100
MAX_CHUNK_SIZE=400
CHUNK_OVERLAP=10

# ================================
# RETRIEVAL SETTINGS
# ================================
RETRIEVAL_TYPE=vector
VECTOR_WEIGHT=0.7
KEYWORD_WEIGHT=0.3

# ================================
# CONTAINER IMAGES (Optional)
# ================================
BACKEND_IMAGE=ghcr.io/manavgup/rag_modulo/backend:latest
FRONTEND_IMAGE=ghcr.io/manavgup/rag_modulo/frontend:latest
TEST_IMAGE=ghcr.io/manavgup/rag_modulo/backend:latest

# ================================
# DEPLOYMENT CONFIGURATION
# ================================
# Deployment environment: local | staging | production
DEPLOYMENT_ENVIRONMENT=local

# Enable specific deployment targets (set in GitHub repository variables for CI/CD)
# These control whether GitHub Actions will deploy to these platforms
DEPLOY_TO_OPENSHIFT=false
DEPLOY_TO_CODE_ENGINE=false

# Cloud provider: aws | azure | ibm | gcp | (empty for local/on-prem)
CLOUD_PROVIDER=

# Container registry to use for deployments
# - ghcr.io/manavgup/rag_modulo (default for standard Kubernetes/OpenShift)
# - ca.icr.io/rag-modulo (IBM Cloud OpenShift only, required due to VPC networking restrictions)
CONTAINER_REGISTRY=ghcr.io/manavgup/rag_modulo

# OpenShift Configuration (when DEPLOY_TO_OPENSHIFT=true)
OPENSHIFT_CLUSTER_NAME=
OPENSHIFT_NAMESPACE=rag-modulo-staging
OPENSHIFT_REGISTRY=ca.icr.io/rag-modulo

# IBM Cloud API Key (required for OpenShift/Code Engine deployments)
# Used for ICR authentication and cluster access
IBM_CLOUD_API_KEY=

# Code Engine Configuration (when DEPLOY_TO_CODE_ENGINE=true)
CODE_ENGINE_PROJECT=
CODE_ENGINE_REGION=us-south
