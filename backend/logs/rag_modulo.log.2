2025-09-18 22:30:53,801 - sqlalchemy.engine.Engine - INFO - SELECT collections.id AS collections_id, collections.name AS collections_name, collections.vector_db_name AS collections_vector_db_name, collections.status AS collections_status, collections.is_private AS collections_is_private, collections.created_at AS collections_created_at, collections.updated_at AS collections_updated_at 
FROM collections 
WHERE collections.id IN (%(primary_keys_1)s::UUID, %(primary_keys_2)s::UUID, %(primary_keys_3)s::UUID, %(primary_keys_4)s::UUID, %(primary_keys_5)s::UUID, %(primary_keys_6)s::UUID, %(primary_keys_7)s::UUID, %(primary_keys_8)s::UUID, %(primary_keys_9)s::UUID, %(primary_keys_10)s::UUID, %(primary_keys_11)s::UUID, %(primary_keys_12)s::UUID, %(primary_keys_13)s::UUID, %(primary_keys_14)s::UUID, %(primary_keys_15)s::UUID, %(primary_keys_16)s::UUID, %(primary_keys_17)s::UUID, %(primary_keys_18)s::UUID, %(primary_keys_19)s::UUID, %(primary_keys_20)s::UUID, %(primary_keys_21)s::UUID, %(primary_keys_22)s::UUID, %(primary_keys_23)s::UUID, %(primary_keys_24)s::UUID, %(primary_keys_25)s::UUID, %(primary_keys_26)s::UUID, %(primary_keys_27)s::UUID, %(primary_keys_28)s::UUID, %(primary_keys_29)s::UUID, %(primary_keys_30)s::UUID, %(primary_keys_31)s::UUID, %(primary_keys_32)s::UUID, %(primary_keys_33)s::UUID, %(primary_keys_34)s::UUID, %(primary_keys_35)s::UUID, %(primary_keys_36)s::UUID, %(primary_keys_37)s::UUID, %(primary_keys_38)s::UUID, %(primary_keys_39)s::UUID, %(primary_keys_40)s::UUID, %(primary_keys_41)s::UUID, %(primary_keys_42)s::UUID, %(primary_keys_43)s::UUID, %(primary_keys_44)s::UUID, %(primary_keys_45)s::UUID, %(primary_keys_46)s::UUID, %(primary_keys_47)s::UUID, %(primary_keys_48)s::UUID, %(primary_keys_49)s::UUID, %(primary_keys_50)s::UUID, %(primary_keys_51)s::UUID)
2025-09-18 22:30:53,803 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'primary_keys_1': UUID('0839a2d8-ac89-499d-ad86-a9ab45bec723'), 'primary_keys_2': UUID('0840b01f-56e4-4bde-902c-2df1f5254b0b'), 'primary_keys_3': UUID('12be5300-84ef-4a0c-be97-97dad9ab23e4'), 'primary_keys_4': UUID('247f9599-4d4d-4cb1-aca4-5c659bc15160'), 'primary_keys_5': UUID('2758fa08-9ab2-4dba-9db6-f558d9f1e2f3'), 'primary_keys_6': UUID('2aeb1af4-f5b4-4bcf-b337-c8774a4dd51f'), 'primary_keys_7': UUID('2fac5ba8-6d46-46b1-adfb-fb04c86bf8d5'), 'primary_keys_8': UUID('3c36ff43-e456-4c70-ba1f-fa437efefb9b'), 'primary_keys_9': UUID('3d68f56c-892e-4f4c-9e77-5bcaa4b6ac8d'), 'primary_keys_10': UUID('4bf091ee-3097-4bf9-99cc-19ddc5902926'), 'primary_keys_11': UUID('57b7788e-eda1-415d-ac8c-fa2dcff6ccc5'), 'primary_keys_12': UUID('5974d6f5-ac4a-4ba5-8c40-06e2711f5390'), 'primary_keys_13': UUID('5c4c7817-5440-48a5-97c7-33b65b58e452'), 'primary_keys_14': UUID('5d4ddabf-b3d3-4ea9-950a-850f84e7ad27'), 'primary_keys_15': UUID('6ce5a43b-85f9-441f-90e9-9e711372fc91'), 'primary_keys_16': UUID('77b917d6-3fb4-40c6-b8bd-858fb593d6a7'), 'primary_keys_17': UUID('7a509018-97e3-4b18-a6e4-71a7f5773da8'), 'primary_keys_18': UUID('7f7be59f-22d6-4aac-97cc-693b1d6cd69d'), 'primary_keys_19': UUID('81050cc2-e429-4ce3-ac76-8a18f438d8bd'), 'primary_keys_20': UUID('8ed26821-01ba-42c0-83c9-f7062faa5338'), 'primary_keys_21': UUID('9384465b-e172-49dc-afe1-aed5badc98cb'), 'primary_keys_22': UUID('93e7cf47-1147-41a0-a48c-916d918210e1'), 'primary_keys_23': UUID('973b4c73-918f-4edf-b67c-1a2b9b8cb888'), 'primary_keys_24': UUID('988ff86b-e1cd-4504-a293-3ec152ce15f0'), 'primary_keys_25': UUID('ab048f99-f6fd-44e9-b776-78629e17e03e'), 'primary_keys_26': UUID('af04fe36-ecd2-42c4-b7c6-a13a6e1327d2'), 'primary_keys_27': UUID('b228dd69-1f58-460a-988a-482192b83ef0'), 'primary_keys_28': UUID('b39aa578-88f6-4534-b0b2-412dc03a58e8'), 'primary_keys_29': UUID('be5f792b-9cf9-4aa4-8a8a-318587daa10a'), 'primary_keys_30': UUID('c5e2f9ad-e20f-4f86-8689-7f8f1a57a346'), 'primary_keys_31': UUID('c8f83a10-db12-4679-b7ce-a6df8ad3a294'), 'primary_keys_32': UUID('ca4b3eef-3d0e-4ace-8030-228c3df95b94'), 'primary_keys_33': UUID('cc69ba15-40b3-4112-b04f-0e5f32095b57'), 'primary_keys_34': UUID('cdf5cfda-6f57-4528-ad07-fdd94f6301e9'), 'primary_keys_35': UUID('cfe7993f-f011-4aa5-8235-70f2116fbcff'), 'primary_keys_36': UUID('d158762b-610d-490d-86f1-f87d577d901d'), 'primary_keys_37': UUID('d25d93f7-513a-439c-bf15-51fc0a2ad736'), 'primary_keys_38': UUID('d2f337cc-a550-49ab-9197-1688ace64a23'), 'primary_keys_39': UUID('d4a8f6c6-da84-4449-8971-1aa12c68f071'), 'primary_keys_40': UUID('d84c8495-c1d2-4db1-9b2a-ec86305fbe5f'), 'primary_keys_41': UUID('db523922-4ea2-414e-bfb8-ab937eae02a7'), 'primary_keys_42': UUID('e41b39e1-6e0d-42f4-a611-9370fb219c06'), 'primary_keys_43': UUID('e641b71c-fb41-4e3b-9ff3-e2be6ea88b73'), 'primary_keys_44': UUID('ed67bec0-ea64-4393-bebb-39d02e0c5e99'), 'primary_keys_45': UUID('ed8b96dc-4ddc-4964-be8d-6bcfa341f17c'), 'primary_keys_46': UUID('ef7df247-a7c9-40c3-a036-f40a32fa2608'), 'primary_keys_47': UUID('f22e3d5b-b224-4a73-86b2-af73186b7ed4'), 'primary_keys_48': UUID('f5e7e805-02d4-4916-988e-a548aaf64395'), 'primary_keys_49': UUID('f7349d18-88f5-45b3-9627-525996be048b'), 'primary_keys_50': UUID('fc4cc8fa-f109-4548-b6b7-203d1998b914'), 'primary_keys_51': UUID('fef1a7fa-36aa-4155-9971-a0561c3b3cf4')}
2025-09-18 22:30:53,805 - sqlalchemy.engine.Engine - INFO - SELECT files.collection_id AS files_collection_id, files.id AS files_id, files.user_id AS files_user_id, files.filename AS files_filename, files.file_path AS files_file_path, files.file_type AS files_file_type, files.document_id AS files_document_id, files.file_metadata AS files_file_metadata, files.created_at AS files_created_at, files.updated_at AS files_updated_at 
FROM files 
WHERE files.collection_id IN (%(primary_keys_1)s::UUID, %(primary_keys_2)s::UUID, %(primary_keys_3)s::UUID, %(primary_keys_4)s::UUID, %(primary_keys_5)s::UUID, %(primary_keys_6)s::UUID, %(primary_keys_7)s::UUID, %(primary_keys_8)s::UUID, %(primary_keys_9)s::UUID, %(primary_keys_10)s::UUID, %(primary_keys_11)s::UUID, %(primary_keys_12)s::UUID, %(primary_keys_13)s::UUID, %(primary_keys_14)s::UUID, %(primary_keys_15)s::UUID, %(primary_keys_16)s::UUID, %(primary_keys_17)s::UUID, %(primary_keys_18)s::UUID, %(primary_keys_19)s::UUID, %(primary_keys_20)s::UUID, %(primary_keys_21)s::UUID, %(primary_keys_22)s::UUID, %(primary_keys_23)s::UUID, %(primary_keys_24)s::UUID, %(primary_keys_25)s::UUID, %(primary_keys_26)s::UUID, %(primary_keys_27)s::UUID, %(primary_keys_28)s::UUID, %(primary_keys_29)s::UUID, %(primary_keys_30)s::UUID, %(primary_keys_31)s::UUID, %(primary_keys_32)s::UUID, %(primary_keys_33)s::UUID, %(primary_keys_34)s::UUID, %(primary_keys_35)s::UUID, %(primary_keys_36)s::UUID, %(primary_keys_37)s::UUID, %(primary_keys_38)s::UUID, %(primary_keys_39)s::UUID, %(primary_keys_40)s::UUID, %(primary_keys_41)s::UUID, %(primary_keys_42)s::UUID, %(primary_keys_43)s::UUID, %(primary_keys_44)s::UUID, %(primary_keys_45)s::UUID, %(primary_keys_46)s::UUID, %(primary_keys_47)s::UUID, %(primary_keys_48)s::UUID, %(primary_keys_49)s::UUID, %(primary_keys_50)s::UUID, %(primary_keys_51)s::UUID)
2025-09-18 22:30:53,806 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'primary_keys_1': UUID('57b7788e-eda1-415d-ac8c-fa2dcff6ccc5'), 'primary_keys_2': UUID('fef1a7fa-36aa-4155-9971-a0561c3b3cf4'), 'primary_keys_3': UUID('77b917d6-3fb4-40c6-b8bd-858fb593d6a7'), 'primary_keys_4': UUID('247f9599-4d4d-4cb1-aca4-5c659bc15160'), 'primary_keys_5': UUID('0840b01f-56e4-4bde-902c-2df1f5254b0b'), 'primary_keys_6': UUID('6ce5a43b-85f9-441f-90e9-9e711372fc91'), 'primary_keys_7': UUID('ed8b96dc-4ddc-4964-be8d-6bcfa341f17c'), 'primary_keys_8': UUID('d25d93f7-513a-439c-bf15-51fc0a2ad736'), 'primary_keys_9': UUID('f22e3d5b-b224-4a73-86b2-af73186b7ed4'), 'primary_keys_10': UUID('7a509018-97e3-4b18-a6e4-71a7f5773da8'), 'primary_keys_11': UUID('7f7be59f-22d6-4aac-97cc-693b1d6cd69d'), 'primary_keys_12': UUID('cc69ba15-40b3-4112-b04f-0e5f32095b57'), 'primary_keys_13': UUID('2fac5ba8-6d46-46b1-adfb-fb04c86bf8d5'), 'primary_keys_14': UUID('12be5300-84ef-4a0c-be97-97dad9ab23e4'), 'primary_keys_15': UUID('b39aa578-88f6-4534-b0b2-412dc03a58e8'), 'primary_keys_16': UUID('2aeb1af4-f5b4-4bcf-b337-c8774a4dd51f'), 'primary_keys_17': UUID('be5f792b-9cf9-4aa4-8a8a-318587daa10a'), 'primary_keys_18': UUID('3d68f56c-892e-4f4c-9e77-5bcaa4b6ac8d'), 'primary_keys_19': UUID('c8f83a10-db12-4679-b7ce-a6df8ad3a294'), 'primary_keys_20': UUID('db523922-4ea2-414e-bfb8-ab937eae02a7'), 'primary_keys_21': UUID('e41b39e1-6e0d-42f4-a611-9370fb219c06'), 'primary_keys_22': UUID('fc4cc8fa-f109-4548-b6b7-203d1998b914'), 'primary_keys_23': UUID('3c36ff43-e456-4c70-ba1f-fa437efefb9b'), 'primary_keys_24': UUID('c5e2f9ad-e20f-4f86-8689-7f8f1a57a346'), 'primary_keys_25': UUID('4bf091ee-3097-4bf9-99cc-19ddc5902926'), 'primary_keys_26': UUID('9384465b-e172-49dc-afe1-aed5badc98cb'), 'primary_keys_27': UUID('d2f337cc-a550-49ab-9197-1688ace64a23'), 'primary_keys_28': UUID('ca4b3eef-3d0e-4ace-8030-228c3df95b94'), 'primary_keys_29': UUID('2758fa08-9ab2-4dba-9db6-f558d9f1e2f3'), 'primary_keys_30': UUID('f5e7e805-02d4-4916-988e-a548aaf64395'), 'primary_keys_31': UUID('988ff86b-e1cd-4504-a293-3ec152ce15f0'), 'primary_keys_32': UUID('b228dd69-1f58-460a-988a-482192b83ef0'), 'primary_keys_33': UUID('d4a8f6c6-da84-4449-8971-1aa12c68f071'), 'primary_keys_34': UUID('5974d6f5-ac4a-4ba5-8c40-06e2711f5390'), 'primary_keys_35': UUID('cfe7993f-f011-4aa5-8235-70f2116fbcff'), 'primary_keys_36': UUID('973b4c73-918f-4edf-b67c-1a2b9b8cb888'), 'primary_keys_37': UUID('ab048f99-f6fd-44e9-b776-78629e17e03e'), 'primary_keys_38': UUID('d158762b-610d-490d-86f1-f87d577d901d'), 'primary_keys_39': UUID('d84c8495-c1d2-4db1-9b2a-ec86305fbe5f'), 'primary_keys_40': UUID('af04fe36-ecd2-42c4-b7c6-a13a6e1327d2'), 'primary_keys_41': UUID('81050cc2-e429-4ce3-ac76-8a18f438d8bd'), 'primary_keys_42': UUID('93e7cf47-1147-41a0-a48c-916d918210e1'), 'primary_keys_43': UUID('f7349d18-88f5-45b3-9627-525996be048b'), 'primary_keys_44': UUID('ed67bec0-ea64-4393-bebb-39d02e0c5e99'), 'primary_keys_45': UUID('0839a2d8-ac89-499d-ad86-a9ab45bec723'), 'primary_keys_46': UUID('cdf5cfda-6f57-4528-ad07-fdd94f6301e9'), 'primary_keys_47': UUID('8ed26821-01ba-42c0-83c9-f7062faa5338'), 'primary_keys_48': UUID('5c4c7817-5440-48a5-97c7-33b65b58e452'), 'primary_keys_49': UUID('ef7df247-a7c9-40c3-a036-f40a32fa2608'), 'primary_keys_50': UUID('5d4ddabf-b3d3-4ea9-950a-850f84e7ad27'), 'primary_keys_51': UUID('e641b71c-fb41-4e3b-9ff3-e2be6ea88b73')}
2025-09-18 22:30:53,808 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,808 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('57b7788e-eda1-415d-ac8c-fa2dcff6ccc5')}
2025-09-18 22:30:53,809 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,809 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('fef1a7fa-36aa-4155-9971-a0561c3b3cf4')}
2025-09-18 22:30:53,809 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,809 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('77b917d6-3fb4-40c6-b8bd-858fb593d6a7')}
2025-09-18 22:30:53,810 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,810 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('247f9599-4d4d-4cb1-aca4-5c659bc15160')}
2025-09-18 22:30:53,810 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,811 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('0840b01f-56e4-4bde-902c-2df1f5254b0b')}
2025-09-18 22:30:53,811 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,811 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('6ce5a43b-85f9-441f-90e9-9e711372fc91')}
2025-09-18 22:30:53,812 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,812 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('ed8b96dc-4ddc-4964-be8d-6bcfa341f17c')}
2025-09-18 22:30:53,812 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,812 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('d25d93f7-513a-439c-bf15-51fc0a2ad736')}
2025-09-18 22:30:53,813 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,813 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('f22e3d5b-b224-4a73-86b2-af73186b7ed4')}
2025-09-18 22:30:53,813 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,813 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('7a509018-97e3-4b18-a6e4-71a7f5773da8')}
2025-09-18 22:30:53,814 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,814 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('cc69ba15-40b3-4112-b04f-0e5f32095b57')}
2025-09-18 22:30:53,815 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,815 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('12be5300-84ef-4a0c-be97-97dad9ab23e4')}
2025-09-18 22:30:53,815 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,815 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('b39aa578-88f6-4534-b0b2-412dc03a58e8')}
2025-09-18 22:30:53,816 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,816 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('be5f792b-9cf9-4aa4-8a8a-318587daa10a')}
2025-09-18 22:30:53,816 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,817 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('c8f83a10-db12-4679-b7ce-a6df8ad3a294')}
2025-09-18 22:30:53,817 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,817 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('db523922-4ea2-414e-bfb8-ab937eae02a7')}
2025-09-18 22:30:53,818 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,818 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('e41b39e1-6e0d-42f4-a611-9370fb219c06')}
2025-09-18 22:30:53,818 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,818 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('2fac5ba8-6d46-46b1-adfb-fb04c86bf8d5')}
2025-09-18 22:30:53,819 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,819 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('3d68f56c-892e-4f4c-9e77-5bcaa4b6ac8d')}
2025-09-18 22:30:53,819 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,819 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('fc4cc8fa-f109-4548-b6b7-203d1998b914')}
2025-09-18 22:30:53,820 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,820 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('3c36ff43-e456-4c70-ba1f-fa437efefb9b')}
2025-09-18 22:30:53,820 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,820 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('4bf091ee-3097-4bf9-99cc-19ddc5902926')}
2025-09-18 22:30:53,821 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,821 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('9384465b-e172-49dc-afe1-aed5badc98cb')}
2025-09-18 22:30:53,821 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,821 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('ca4b3eef-3d0e-4ace-8030-228c3df95b94')}
2025-09-18 22:30:53,822 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,822 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('f5e7e805-02d4-4916-988e-a548aaf64395')}
2025-09-18 22:30:53,822 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,822 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('2aeb1af4-f5b4-4bcf-b337-c8774a4dd51f')}
2025-09-18 22:30:53,823 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,823 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('c5e2f9ad-e20f-4f86-8689-7f8f1a57a346')}
2025-09-18 22:30:53,823 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,823 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('2758fa08-9ab2-4dba-9db6-f558d9f1e2f3')}
2025-09-18 22:30:53,824 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,824 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('b228dd69-1f58-460a-988a-482192b83ef0')}
2025-09-18 22:30:53,824 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,824 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('d4a8f6c6-da84-4449-8971-1aa12c68f071')}
2025-09-18 22:30:53,825 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,825 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('7f7be59f-22d6-4aac-97cc-693b1d6cd69d')}
2025-09-18 22:30:53,825 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,825 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('988ff86b-e1cd-4504-a293-3ec152ce15f0')}
2025-09-18 22:30:53,826 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,826 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('cfe7993f-f011-4aa5-8235-70f2116fbcff')}
2025-09-18 22:30:53,826 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,826 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('973b4c73-918f-4edf-b67c-1a2b9b8cb888')}
2025-09-18 22:30:53,827 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,827 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('5974d6f5-ac4a-4ba5-8c40-06e2711f5390')}
2025-09-18 22:30:53,827 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,827 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('ab048f99-f6fd-44e9-b776-78629e17e03e')}
2025-09-18 22:30:53,828 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,828 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('d2f337cc-a550-49ab-9197-1688ace64a23')}
2025-09-18 22:30:53,828 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,828 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('d158762b-610d-490d-86f1-f87d577d901d')}
2025-09-18 22:30:53,829 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,829 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('d84c8495-c1d2-4db1-9b2a-ec86305fbe5f')}
2025-09-18 22:30:53,829 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,829 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('af04fe36-ecd2-42c4-b7c6-a13a6e1327d2')}
2025-09-18 22:30:53,830 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,830 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('81050cc2-e429-4ce3-ac76-8a18f438d8bd')}
2025-09-18 22:30:53,830 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,830 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('93e7cf47-1147-41a0-a48c-916d918210e1')}
2025-09-18 22:30:53,831 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,831 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('f7349d18-88f5-45b3-9627-525996be048b')}
2025-09-18 22:30:53,831 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,831 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('ed67bec0-ea64-4393-bebb-39d02e0c5e99')}
2025-09-18 22:30:53,832 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,832 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('0839a2d8-ac89-499d-ad86-a9ab45bec723')}
2025-09-18 22:30:53,832 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,832 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('cdf5cfda-6f57-4528-ad07-fdd94f6301e9')}
2025-09-18 22:30:53,833 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,833 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('8ed26821-01ba-42c0-83c9-f7062faa5338')}
2025-09-18 22:30:53,833 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,834 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('5c4c7817-5440-48a5-97c7-33b65b58e452')}
2025-09-18 22:30:53,834 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,834 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('ef7df247-a7c9-40c3-a036-f40a32fa2608')}
2025-09-18 22:30:53,834 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,835 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('5d4ddabf-b3d3-4ea9-950a-850f84e7ad27')}
2025-09-18 22:30:53,835 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:30:53,835 - sqlalchemy.engine.Engine - INFO - [cached since 5153s ago] {'param_1': UUID('e641b71c-fb41-4e3b-9ff3-e2be6ea88b73')}
2025-09-18 22:30:53,836 - router.collections - INFO - Retrieved 51 collections for user 1aa5093c-084e-4f20-905b-cf5e18301b1c
2025-09-18 22:30:53,837 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-09-18 22:30:53,837 - rag_solution.file_management.database - INFO - Database session closed.
2025-09-18 22:30:53,839 - core.authentication_middleware - INFO - AuthMiddleware: Processing request to /api/auth/me
2025-09-18 22:30:53,847 - core.authentication_middleware - INFO - AuthMiddleware: Mock user ready with ID: 1aa5093c-084e-4f20-905b-cf5e18301b1c
2025-09-18 22:30:53,847 - core.authentication_middleware - INFO - AuthMiddleware: Using created mock user UUID: 1aa5093c-084e-4f20-905b-cf5e18301b1c
2025-09-18 22:30:53,849 - core.authentication_middleware - INFO - AuthMiddleware: Processing request to /api/search
2025-09-18 22:30:53,867 - core.authentication_middleware - INFO - AuthMiddleware: Mock user ready with ID: 1aa5093c-084e-4f20-905b-cf5e18301b1c
2025-09-18 22:30:53,867 - core.authentication_middleware - INFO - AuthMiddleware: Using created mock user UUID: 1aa5093c-084e-4f20-905b-cf5e18301b1c
2025-09-18 22:30:53,869 - rag_solution.file_management.database - INFO - === DATABASE DEPENDENCY DEBUG ===
2025-09-18 22:30:53,869 - rag_solution.file_management.database - INFO - get_db() called - creating database session
2025-09-18 22:30:53,869 - rag_solution.file_management.database - INFO - === END DATABASE DEPENDENCY DEBUG ===
2025-09-18 22:30:53,870 - rag_solution.file_management.database - INFO - Creating a new database session.
2025-09-18 22:30:53,870 - services.search - INFO - Starting search operation
2025-09-18 22:30:53,878 - root - INFO - Connected to Milvus at milvus-standalone:19530
2025-09-18 22:30:53,878 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-09-18 22:30:53,879 - sqlalchemy.engine.Engine - INFO - SELECT anon_1.collections_id AS anon_1_collections_id, anon_1.collections_name AS anon_1_collections_name, anon_1.collections_vector_db_name AS anon_1_collections_vector_db_name, anon_1.collections_status AS anon_1_collections_status, anon_1.collections_is_private AS anon_1_collections_is_private, anon_1.collections_created_at AS anon_1_collections_created_at, anon_1.collections_updated_at AS anon_1_collections_updated_at, files_1.id AS files_1_id, files_1.user_id AS files_1_user_id, files_1.collection_id AS files_1_collection_id, files_1.filename AS files_1_filename, files_1.file_path AS files_1_file_path, files_1.file_type AS files_1_file_type, files_1.document_id AS files_1_document_id, files_1.file_metadata AS files_1_file_metadata, files_1.created_at AS files_1_created_at, files_1.updated_at AS files_1_updated_at, user_collection_1.user_id AS user_collection_1_user_id, user_collection_1.collection_id AS user_collection_1_collection_id, user_collection_1.joined_at AS user_collection_1_joined_at 
FROM (SELECT collections.id AS collections_id, collections.name AS collections_name, collections.vector_db_name AS collections_vector_db_name, collections.status AS collections_status, collections.is_private AS collections_is_private, collections.created_at AS collections_created_at, collections.updated_at AS collections_updated_at 
FROM collections 
WHERE collections.id = %(id_1)s::UUID 
 LIMIT %(param_1)s) AS anon_1 LEFT OUTER JOIN files AS files_1 ON anon_1.collections_id = files_1.collection_id LEFT OUTER JOIN user_collection AS user_collection_1 ON anon_1.collections_id = user_collection_1.collection_id
2025-09-18 22:30:53,879 - sqlalchemy.engine.Engine - INFO - [cached since 868.1s ago] {'id_1': UUID('e641b71c-fb41-4e3b-9ff3-e2be6ea88b73'), 'param_1': 1}
2025-09-18 22:30:53,880 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.ibm_id AS users_ibm_id, users.email AS users_email, users.name AS users_name, users.role AS users_role, users.preferred_provider_id AS users_preferred_provider_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id IN (%(primary_keys_1)s::UUID)
2025-09-18 22:30:53,880 - sqlalchemy.engine.Engine - INFO - [cached since 868.1s ago] {'primary_keys_1': UUID('1aa5093c-084e-4f20-905b-cf5e18301b1c')}
2025-09-18 22:30:53,881 - services.search - INFO - Using Chain of Thought for enhanced reasoning
2025-09-18 22:30:53,884 - services.search - WARNING - Chain of Thought failed, falling back to regular search: 'ChainOfThoughtOutput' object has no attribute 'source_attributions'
2025-09-18 22:30:53,884 - rag_solution.query_rewriting.query_rewriter - INFO - Initialized QueryRewriter with 1 rewriters
2025-09-18 22:30:53,887 - root - INFO - Connected to Milvus at milvus-standalone:19530
2025-09-18 22:30:53,888 - sqlalchemy.engine.Engine - INFO - SELECT pipeline_configs.id AS pipeline_configs_id, pipeline_configs.user_id AS pipeline_configs_user_id, pipeline_configs.collection_id AS pipeline_configs_collection_id, pipeline_configs.name AS pipeline_configs_name, pipeline_configs.description AS pipeline_configs_description, pipeline_configs.chunking_strategy AS pipeline_configs_chunking_strategy, pipeline_configs.embedding_model AS pipeline_configs_embedding_model, pipeline_configs.retriever AS pipeline_configs_retriever, pipeline_configs.context_strategy AS pipeline_configs_context_strategy, pipeline_configs.enable_logging AS pipeline_configs_enable_logging, pipeline_configs.max_context_length AS pipeline_configs_max_context_length, pipeline_configs.timeout AS pipeline_configs_timeout, pipeline_configs.config_metadata AS pipeline_configs_config_metadata, pipeline_configs.is_default AS pipeline_configs_is_default, pipeline_configs.provider_id AS pipeline_configs_provider_id, pipeline_configs.created_at AS pipeline_configs_created_at, pipeline_configs.updated_at AS pipeline_configs_updated_at 
FROM pipeline_configs 
WHERE pipeline_configs.user_id = %(user_id_1)s::UUID AND pipeline_configs.collection_id IS NULL AND pipeline_configs.is_default IS true 
 LIMIT %(param_1)s
2025-09-18 22:30:53,888 - sqlalchemy.engine.Engine - INFO - [cached since 868.1s ago] {'user_id_1': UUID('1aa5093c-084e-4f20-905b-cf5e18301b1c'), 'param_1': 1}
2025-09-18 22:30:53,889 - sqlalchemy.engine.Engine - INFO - SELECT llm_providers.id AS llm_providers_id, llm_providers.name AS llm_providers_name, llm_providers.base_url AS llm_providers_base_url, llm_providers.api_key AS llm_providers_api_key, llm_providers.org_id AS llm_providers_org_id, llm_providers.project_id AS llm_providers_project_id, llm_providers.is_active AS llm_providers_is_active, llm_providers.created_at AS llm_providers_created_at, llm_providers.updated_at AS llm_providers_updated_at, llm_providers.is_default AS llm_providers_is_default 
FROM llm_providers 
WHERE llm_providers.id IN (%(primary_keys_1)s::UUID)
2025-09-18 22:30:53,889 - sqlalchemy.engine.Engine - INFO - [cached since 868.1s ago] {'primary_keys_1': UUID('7830c374-87a0-477c-b649-ecf2aae17677')}
2025-09-18 22:30:53,890 - sqlalchemy.engine.Engine - INFO - SELECT pipeline_configs.id AS pipeline_configs_id, pipeline_configs.user_id AS pipeline_configs_user_id, pipeline_configs.collection_id AS pipeline_configs_collection_id, pipeline_configs.name AS pipeline_configs_name, pipeline_configs.description AS pipeline_configs_description, pipeline_configs.chunking_strategy AS pipeline_configs_chunking_strategy, pipeline_configs.embedding_model AS pipeline_configs_embedding_model, pipeline_configs.retriever AS pipeline_configs_retriever, pipeline_configs.context_strategy AS pipeline_configs_context_strategy, pipeline_configs.enable_logging AS pipeline_configs_enable_logging, pipeline_configs.max_context_length AS pipeline_configs_max_context_length, pipeline_configs.timeout AS pipeline_configs_timeout, pipeline_configs.config_metadata AS pipeline_configs_config_metadata, pipeline_configs.is_default AS pipeline_configs_is_default, pipeline_configs.provider_id AS pipeline_configs_provider_id, pipeline_configs.created_at AS pipeline_configs_created_at, pipeline_configs.updated_at AS pipeline_configs_updated_at 
FROM pipeline_configs 
WHERE pipeline_configs.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-09-18 22:30:53,891 - sqlalchemy.engine.Engine - INFO - [cached since 868.1s ago] {'id_1': UUID('c1c70b3f-f303-40b8-9765-f8db58caa5a0'), 'param_1': 1}
2025-09-18 22:30:53,891 - sqlalchemy.engine.Engine - INFO - SELECT llm_providers.id AS llm_providers_id, llm_providers.name AS llm_providers_name, llm_providers.base_url AS llm_providers_base_url, llm_providers.api_key AS llm_providers_api_key, llm_providers.org_id AS llm_providers_org_id, llm_providers.project_id AS llm_providers_project_id, llm_providers.is_active AS llm_providers_is_active, llm_providers.created_at AS llm_providers_created_at, llm_providers.updated_at AS llm_providers_updated_at, llm_providers.is_default AS llm_providers_is_default 
FROM llm_providers 
WHERE llm_providers.id IN (%(primary_keys_1)s::UUID)
2025-09-18 22:30:53,891 - sqlalchemy.engine.Engine - INFO - [cached since 868.1s ago] {'primary_keys_1': UUID('7830c374-87a0-477c-b649-ecf2aae17677')}
2025-09-18 22:30:53,892 - sqlalchemy.engine.Engine - INFO - SELECT anon_1.collections_id AS anon_1_collections_id, anon_1.collections_name AS anon_1_collections_name, anon_1.collections_vector_db_name AS anon_1_collections_vector_db_name, anon_1.collections_status AS anon_1_collections_status, anon_1.collections_is_private AS anon_1_collections_is_private, anon_1.collections_created_at AS anon_1_collections_created_at, anon_1.collections_updated_at AS anon_1_collections_updated_at, files_1.id AS files_1_id, files_1.user_id AS files_1_user_id, files_1.collection_id AS files_1_collection_id, files_1.filename AS files_1_filename, files_1.file_path AS files_1_file_path, files_1.file_type AS files_1_file_type, files_1.document_id AS files_1_document_id, files_1.file_metadata AS files_1_file_metadata, files_1.created_at AS files_1_created_at, files_1.updated_at AS files_1_updated_at, user_collection_1.user_id AS user_collection_1_user_id, user_collection_1.collection_id AS user_collection_1_collection_id, user_collection_1.joined_at AS user_collection_1_joined_at 
FROM (SELECT collections.id AS collections_id, collections.name AS collections_name, collections.vector_db_name AS collections_vector_db_name, collections.status AS collections_status, collections.is_private AS collections_is_private, collections.created_at AS collections_created_at, collections.updated_at AS collections_updated_at 
FROM collections 
WHERE collections.id = %(id_1)s::UUID 
 LIMIT %(param_1)s) AS anon_1 LEFT OUTER JOIN files AS files_1 ON anon_1.collections_id = files_1.collection_id LEFT OUTER JOIN user_collection AS user_collection_1 ON anon_1.collections_id = user_collection_1.collection_id
2025-09-18 22:30:53,892 - sqlalchemy.engine.Engine - INFO - [cached since 868.1s ago] {'id_1': UUID('e641b71c-fb41-4e3b-9ff3-e2be6ea88b73'), 'param_1': 1}
2025-09-18 22:30:53,893 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.ibm_id AS users_ibm_id, users.email AS users_email, users.name AS users_name, users.role AS users_role, users.preferred_provider_id AS users_preferred_provider_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id IN (%(primary_keys_1)s::UUID)
2025-09-18 22:30:53,893 - sqlalchemy.engine.Engine - INFO - [cached since 868.1s ago] {'primary_keys_1': UUID('1aa5093c-084e-4f20-905b-cf5e18301b1c')}
2025-09-18 22:30:53,896 - root - INFO - Collection 'collection_b1ef216cb22545f48e464c98e000e2e7' already exists
2025-09-18 22:30:53,900 - services.pipeline - INFO - Created collection collection_b1ef216cb22545f48e464c98e000e2e7 in vector store
2025-09-18 22:30:53,900 - services.pipeline - INFO - Pipeline initialized for collection: collection_b1ef216cb22545f48e464c98e000e2e7
2025-09-18 22:30:53,900 - services.pipeline - INFO - Starting RAG pipeline execution
2025-09-18 22:30:53,900 - services.pipeline - INFO - **** Validating configuration for user_id: 1aa5093c-084e-4f20-905b-cf5e18301b1c
2025-09-18 22:30:53,900 - sqlalchemy.engine.Engine - INFO - SELECT pipeline_configs.id AS pipeline_configs_id, pipeline_configs.user_id AS pipeline_configs_user_id, pipeline_configs.collection_id AS pipeline_configs_collection_id, pipeline_configs.name AS pipeline_configs_name, pipeline_configs.description AS pipeline_configs_description, pipeline_configs.chunking_strategy AS pipeline_configs_chunking_strategy, pipeline_configs.embedding_model AS pipeline_configs_embedding_model, pipeline_configs.retriever AS pipeline_configs_retriever, pipeline_configs.context_strategy AS pipeline_configs_context_strategy, pipeline_configs.enable_logging AS pipeline_configs_enable_logging, pipeline_configs.max_context_length AS pipeline_configs_max_context_length, pipeline_configs.timeout AS pipeline_configs_timeout, pipeline_configs.config_metadata AS pipeline_configs_config_metadata, pipeline_configs.is_default AS pipeline_configs_is_default, pipeline_configs.provider_id AS pipeline_configs_provider_id, pipeline_configs.created_at AS pipeline_configs_created_at, pipeline_configs.updated_at AS pipeline_configs_updated_at 
FROM pipeline_configs 
WHERE pipeline_configs.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-09-18 22:30:53,901 - sqlalchemy.engine.Engine - INFO - [cached since 868.1s ago] {'id_1': UUID('c1c70b3f-f303-40b8-9765-f8db58caa5a0'), 'param_1': 1}
2025-09-18 22:30:53,901 - sqlalchemy.engine.Engine - INFO - SELECT llm_providers.id AS llm_providers_id, llm_providers.name AS llm_providers_name, llm_providers.base_url AS llm_providers_base_url, llm_providers.api_key AS llm_providers_api_key, llm_providers.org_id AS llm_providers_org_id, llm_providers.project_id AS llm_providers_project_id, llm_providers.is_active AS llm_providers_is_active, llm_providers.created_at AS llm_providers_created_at, llm_providers.updated_at AS llm_providers_updated_at, llm_providers.is_default AS llm_providers_is_default 
FROM llm_providers 
WHERE llm_providers.id IN (%(primary_keys_1)s::UUID)
2025-09-18 22:30:53,901 - sqlalchemy.engine.Engine - INFO - [cached since 868.1s ago] {'primary_keys_1': UUID('7830c374-87a0-477c-b649-ecf2aae17677')}
2025-09-18 22:30:53,902 - sqlalchemy.engine.Engine - INFO - SELECT llm_parameters.id AS llm_parameters_id, llm_parameters.user_id AS llm_parameters_user_id, llm_parameters.name AS llm_parameters_name, llm_parameters.description AS llm_parameters_description, llm_parameters.max_new_tokens AS llm_parameters_max_new_tokens, llm_parameters.temperature AS llm_parameters_temperature, llm_parameters.top_k AS llm_parameters_top_k, llm_parameters.top_p AS llm_parameters_top_p, llm_parameters.repetition_penalty AS llm_parameters_repetition_penalty, llm_parameters.is_default AS llm_parameters_is_default, llm_parameters.created_at AS llm_parameters_created_at, llm_parameters.updated_at AS llm_parameters_updated_at 
FROM llm_parameters 
WHERE llm_parameters.user_id = %(user_id_1)s::UUID AND llm_parameters.is_default IS true 
 LIMIT %(param_1)s
2025-09-18 22:30:53,902 - sqlalchemy.engine.Engine - INFO - [cached since 865.2s ago] {'user_id_1': UUID('1aa5093c-084e-4f20-905b-cf5e18301b1c'), 'param_1': 1}
2025-09-18 22:30:53,903 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.ibm_id AS users_ibm_id, users.email AS users_email, users.name AS users_name, users.role AS users_role, users.preferred_provider_id AS users_preferred_provider_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id IN (%(primary_keys_1)s::UUID)
2025-09-18 22:30:53,903 - sqlalchemy.engine.Engine - INFO - [cached since 865.2s ago] {'primary_keys_1': UUID('1aa5093c-084e-4f20-905b-cf5e18301b1c')}
2025-09-18 22:30:53,904 - sqlalchemy.engine.Engine - INFO - SELECT llm_providers.id AS llm_providers_id, llm_providers.name AS llm_providers_name, llm_providers.base_url AS llm_providers_base_url, llm_providers.api_key AS llm_providers_api_key, llm_providers.org_id AS llm_providers_org_id, llm_providers.project_id AS llm_providers_project_id, llm_providers.is_active AS llm_providers_is_active, llm_providers.created_at AS llm_providers_created_at, llm_providers.updated_at AS llm_providers_updated_at, llm_providers.is_default AS llm_providers_is_default 
FROM llm_providers 
WHERE llm_providers.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-09-18 22:30:53,904 - sqlalchemy.engine.Engine - INFO - [cached since 5366s ago] {'id_1': UUID('7830c374-87a0-477c-b649-ecf2aae17677'), 'param_1': 1}
2025-09-18 22:30:53,905 - llm.providers.WatsonXLLM - INFO - Initializing WatsonXLLM
2025-09-18 22:30:53,905 - sqlalchemy.engine.Engine - INFO - SELECT llm_providers.id AS llm_providers_id, llm_providers.name AS llm_providers_name, llm_providers.base_url AS llm_providers_base_url, llm_providers.api_key AS llm_providers_api_key, llm_providers.org_id AS llm_providers_org_id, llm_providers.project_id AS llm_providers_project_id, llm_providers.is_active AS llm_providers_is_active, llm_providers.created_at AS llm_providers_created_at, llm_providers.updated_at AS llm_providers_updated_at, llm_providers.is_default AS llm_providers_is_default 
FROM llm_providers 
WHERE llm_providers.name ILIKE %(name_1)s AND llm_providers.is_active 
 LIMIT %(param_1)s
2025-09-18 22:30:53,905 - sqlalchemy.engine.Engine - INFO - [cached since 865.2s ago] {'name_1': 'watsonx', 'param_1': 1}
2025-09-18 22:30:54,629 - sqlalchemy.engine.Engine - INFO - SELECT llm_models.id AS llm_models_id, llm_models.provider_id AS llm_models_provider_id, llm_models.model_id AS llm_models_model_id, llm_models.default_model_id AS llm_models_default_model_id, llm_models.model_type AS llm_models_model_type, llm_models.timeout AS llm_models_timeout, llm_models.max_retries AS llm_models_max_retries, llm_models.batch_size AS llm_models_batch_size, llm_models.retry_delay AS llm_models_retry_delay, llm_models.concurrency_limit AS llm_models_concurrency_limit, llm_models.stream AS llm_models_stream, llm_models.rate_limit AS llm_models_rate_limit, llm_models.is_default AS llm_models_is_default, llm_models.is_active AS llm_models_is_active, llm_models.created_at AS llm_models_created_at, llm_models.updated_at AS llm_models_updated_at 
FROM llm_models 
WHERE llm_models.provider_id = %(provider_id_1)s::UUID
2025-09-18 22:30:54,629 - sqlalchemy.engine.Engine - INFO - [cached since 865.2s ago] {'provider_id_1': UUID('7830c374-87a0-477c-b649-ecf2aae17677')}
2025-09-18 22:30:54,638 - llm.providers.watsonx - INFO - Initializing embeddings client with batch_size=3, concurrency_limit=1
2025-09-18 22:30:55,228 - sqlalchemy.engine.Engine - INFO - SELECT prompt_templates.id AS prompt_templates_id, prompt_templates.user_id AS prompt_templates_user_id, prompt_templates.name AS prompt_templates_name, prompt_templates.template_type AS prompt_templates_template_type, prompt_templates.system_prompt AS prompt_templates_system_prompt, prompt_templates.template_format AS prompt_templates_template_format, prompt_templates.input_variables AS prompt_templates_input_variables, prompt_templates.example_inputs AS prompt_templates_example_inputs, prompt_templates.context_strategy AS prompt_templates_context_strategy, prompt_templates.max_context_length AS prompt_templates_max_context_length, prompt_templates.stop_sequences AS prompt_templates_stop_sequences, prompt_templates.validation_schema AS prompt_templates_validation_schema, prompt_templates.is_default AS prompt_templates_is_default, prompt_templates.created_at AS prompt_templates_created_at, prompt_templates.updated_at AS prompt_templates_updated_at 
FROM prompt_templates 
WHERE prompt_templates.user_id = %(user_id_1)s::UUID AND prompt_templates.template_type = %(template_type_1)s
2025-09-18 22:30:55,229 - sqlalchemy.engine.Engine - INFO - [cached since 865.2s ago] {'user_id_1': UUID('1aa5093c-084e-4f20-905b-cf5e18301b1c'), 'template_type_1': 'RAG_QUERY'}
2025-09-18 22:30:55,230 - rag_solution.query_rewriting.query_rewriter - INFO - Starting query rewriting process for: How does IBM's business strategy work and what are the key components that drive their success?
2025-09-18 22:30:55,230 - rag_solution.query_rewriting.query_rewriter - INFO - Applying simple query expansion to: How does IBM's business strategy work and what are the key components that drive their success?
2025-09-18 22:30:55,230 - rag_solution.query_rewriting.query_rewriter - INFO - Expanded query: How does IBM's business strategy work and what are the key components that drive their success? AND (relevant OR important OR key)
2025-09-18 22:30:55,230 - rag_solution.query_rewriting.query_rewriter - INFO - Final rewritten query: How does IBM's business strategy work and what are the key components that drive their success? AND (relevant OR important OR key)
2025-09-18 22:30:56,102 - httpx - INFO - HTTP Request: POST https://us-south.ml.cloud.ibm.com/ml/v1/text/embeddings?version=2025-08-27 "HTTP/1.1 200 OK"
2025-09-18 22:30:56,113 - root - INFO - Query response: data: ['["id: 460905687422606761, distance: 0.6977970004081726, entity: {\'document_id\': \'359ee79f-999e-4239-98fe-3f8a0ddf2018\', \'text\': \'Notes to Consolidated Financial Statements  International Business Machines Corporation and Subsidiary Companies                        97  \\\\n \\\\n \\\\nContingencies \\\\nAs a company with a substantial employee population and with clients in more than 175 countries, IBM is involved, either as plaintiff \\\\nor defendant, in a variety of ongoing claims, demands, suits, investigations, tax matters and proceedings\', \'chunk_id\': \'7a379964-e339-4fb0-b041-b6e923cf935d\', \'source\': \'Source.PDF\', \'page_number\': 99, \'chunk_number\': 0, \'document_name\': \'2022-ibm-annual-report.pdf\'}", "id: 460905687422602618, distance: 0.6957675218582153, entity: {\'document_id\': \'5096a93f-92e2-403e-a641-5fdfe8e99b6c\', \'text\': \'Notes to Consolidated Financial Statements  International Business Machines Corporation and Subsidiary Companies                        119\\\\n \\\\n \\\\nContingencies \\\\nAs a company with a substantial employee population and with clients in more than 175 countries, IBM is involved, either as plaintiff \\\\nor defendant, in a variety of ongoing claims, demands, suits, investigations, tax matters and proceedings \', \'chunk_id\': \'5cf86a63-ab8d-4910-89ab-befc72bd8c77\', \'source\': \'Source.PDF\', \'page_number\': 120, \'chunk_number\': 0, \'document_name\': \'2020-ibm-annual-report.pdf\'}", "id: 460905687422609101, distance: 0.6795400977134705, entity: {\'document_id\': \'8847ac05-266c-4fcb-b973-5bf72fa280e6\', \'text\': \'pand our ecosystem  and drive productivity across our business. We have made significant progress in becoming a higher growth, more focused business  that has delivered sustained revenue growth, strong cash generation and meaningful returns to all our stakeholders – our 2024  performance is a proof point of this progress. Today, IBM is a software-led, fully integrated platform company, a business \', \'chunk_id\': \'53e9e026-5e72-4c7d-9400-93bfda4a4fe9\', \'source\': \'Source.PDF\', \'page_number\': 35, \'chunk_number\': 13, \'document_name\': \'2024-ibm-annual-report.pdf\'}", "id: 460905687422600824, distance: 0.6747317314147949, entity: {\'document_id\': \'5096a93f-92e2-403e-a641-5fdfe8e99b6c\', \'text\': \' our shareholders, for your  support on our journey. \\\\nAs I look back, for me as for so many other IBMers, 2020  has put the spotlight on IBM’s essential role for our clients.  IBM is the backbone of some of the most critical systems  that keep the world running. Our technologies and services  help banks process credit card transactions, businesses  run supply chains, telcos connect customers, heal\', \'chunk_id\': \'14c1b956-5063-49cf-9be0-4fa039d97bbc\', \'source\': \'Source.PDF\', \'page_number\': 5, \'chunk_number\': 10, \'document_name\': \'2020-ibm-annual-report.pdf\'}", "id: 460905687422605362, distance: 0.6713692545890808, entity: {\'document_id\': \'359ee79f-999e-4239-98fe-3f8a0ddf2018\', \'text\': \'Management Discussion  International Business Machines Corporation and Subsidiary Companies                          11\\\\n \\\\n \\\\nDESCRIPTION OF BUSINESS \\\\nPlease refer to IBM’s Annual Report on Form 10-K filed with the SEC on February 28, 2023, for Item 1A. entitled “Risk Factors.” \\\\nIBM is addressing the hybrid cloud and AI opportunity with a platform-centric approach, focused on providing client value \', \'chunk_id\': \'9a5d3a54-a413-48df-97b4-9e42060eac06\', \'source\': \'Source.PDF\', \'page_number\': 13, \'chunk_number\': 0, \'document_name\': \'2022-ibm-annual-report.pdf\'}"]']
2025-09-18 22:30:56,113 - rag_solution.retrieval.retriever - INFO - Received 5 documents for query: How does IBM's business strategy work and what are the key components that drive their success? AND (relevant OR important OR key)
2025-09-18 22:30:56,114 - services.pipeline - INFO - Retrieved 5 documents
2025-09-18 22:30:56,114 - sqlalchemy.engine.Engine - INFO - SELECT prompt_templates.id AS prompt_templates_id, prompt_templates.user_id AS prompt_templates_user_id, prompt_templates.name AS prompt_templates_name, prompt_templates.template_type AS prompt_templates_template_type, prompt_templates.system_prompt AS prompt_templates_system_prompt, prompt_templates.template_format AS prompt_templates_template_format, prompt_templates.input_variables AS prompt_templates_input_variables, prompt_templates.example_inputs AS prompt_templates_example_inputs, prompt_templates.context_strategy AS prompt_templates_context_strategy, prompt_templates.max_context_length AS prompt_templates_max_context_length, prompt_templates.stop_sequences AS prompt_templates_stop_sequences, prompt_templates.validation_schema AS prompt_templates_validation_schema, prompt_templates.is_default AS prompt_templates_is_default, prompt_templates.created_at AS prompt_templates_created_at, prompt_templates.updated_at AS prompt_templates_updated_at 
FROM prompt_templates 
WHERE prompt_templates.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-09-18 22:30:56,114 - sqlalchemy.engine.Engine - INFO - [cached since 736.9s ago] {'id_1': UUID('82a7b16e-17ab-4914-8154-eb27fd4f2348'), 'param_1': 1}
2025-09-18 22:30:56,115 - llm.providers.watsonx - INFO - Initializing ModelInference with max_retries=10, delay_time=0.500000
2025-09-18 22:30:56,896 - httpx - INFO - HTTP Request: GET https://us-south.ml.cloud.ibm.com/ml/v1/foundation_model_specs?version=2025-08-27&project_id=3f77f23d-71b7-426b-ae13-bc4710769880&filters=function_text_generation%2C%21lifecycle_withdrawn%3Aand&limit=200 "HTTP/1.1 200 OK"
2025-09-18 22:30:56,962 - llm.providers.watsonx - INFO - Model ID: ibm/granite-3-3-8b-instruct
2025-09-18 22:30:56,962 - llm.providers.watsonx - INFO - Model parameters: {'decoding_method': 'sample', 'max_new_tokens': 500, 'temperature': 0.3, 'top_k': 50, 'top_p': 1.0}
2025-09-18 22:31:01,554 - httpx - INFO - HTTP Request: POST https://us-south.ml.cloud.ibm.com/ml/v1/text/generation?version=2025-08-27 "HTTP/1.1 200 OK"
2025-09-18 22:31:01,555 - services.pipeline - INFO - Pipeline executed in 7.65 seconds
2025-09-18 22:31:01,555 - rag_solution.services.file_management_service - INFO - Fetching files for collection: e641b71c-fb41-4e3b-9ff3-e2be6ea88b73
2025-09-18 22:31:01,556 - sqlalchemy.engine.Engine - INFO - SELECT files.id AS files_id, files.user_id AS files_user_id, files.collection_id AS files_collection_id, files.filename AS files_filename, files.file_path AS files_file_path, files.file_type AS files_file_type, files.document_id AS files_document_id, files.file_metadata AS files_file_metadata, files.created_at AS files_created_at, files.updated_at AS files_updated_at 
FROM files 
WHERE files.collection_id = %(collection_id_1)s::UUID
2025-09-18 22:31:01,556 - sqlalchemy.engine.Engine - INFO - [cached since 737.8s ago] {'collection_id_1': UUID('e641b71c-fb41-4e3b-9ff3-e2be6ea88b73')}
2025-09-18 22:31:01,557 - rag_solution.services.file_management_service - INFO - Retrieved 5 files for collection e641b71c-fb41-4e3b-9ff3-e2be6ea88b73
2025-09-18 22:31:01,558 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-09-18 22:31:01,558 - rag_solution.file_management.database - INFO - Database session closed.
2025-09-18 22:31:04,118 - core.authentication_middleware - INFO - AuthMiddleware: Processing request to /api/health
2025-09-18 22:31:04,126 - core.authentication_middleware - INFO - AuthMiddleware: Mock user ready with ID: 1aa5093c-084e-4f20-905b-cf5e18301b1c
2025-09-18 22:31:04,126 - core.authentication_middleware - INFO - AuthMiddleware: Using created mock user UUID: 1aa5093c-084e-4f20-905b-cf5e18301b1c
2025-09-18 22:31:04,127 - rag_solution.file_management.database - INFO - === DATABASE DEPENDENCY DEBUG ===
2025-09-18 22:31:04,127 - rag_solution.file_management.database - INFO - get_db() called - creating database session
2025-09-18 22:31:04,127 - rag_solution.file_management.database - INFO - === END DATABASE DEPENDENCY DEBUG ===
2025-09-18 22:31:04,127 - rag_solution.file_management.database - INFO - Creating a new database session.
2025-09-18 22:31:04,130 - root - INFO - Connected to Milvus at milvus-standalone:19530
2025-09-18 22:31:04,131 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-09-18 22:31:04,131 - sqlalchemy.engine.Engine - INFO - Select 1
2025-09-18 22:31:04,131 - sqlalchemy.engine.Engine - INFO - [cached since 5292s ago] {}
2025-09-18 22:31:05,060 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-09-18 22:31:05,060 - rag_solution.file_management.database - INFO - Database session closed.
2025-09-18 22:31:36,133 - core.authentication_middleware - INFO - AuthMiddleware: Processing request to /api/health
2025-09-18 22:31:36,156 - core.authentication_middleware - INFO - AuthMiddleware: Mock user ready with ID: 1aa5093c-084e-4f20-905b-cf5e18301b1c
2025-09-18 22:31:36,156 - core.authentication_middleware - INFO - AuthMiddleware: Using created mock user UUID: 1aa5093c-084e-4f20-905b-cf5e18301b1c
2025-09-18 22:31:36,158 - rag_solution.file_management.database - INFO - === DATABASE DEPENDENCY DEBUG ===
2025-09-18 22:31:36,158 - rag_solution.file_management.database - INFO - get_db() called - creating database session
2025-09-18 22:31:36,159 - rag_solution.file_management.database - INFO - === END DATABASE DEPENDENCY DEBUG ===
2025-09-18 22:31:36,159 - rag_solution.file_management.database - INFO - Creating a new database session.
2025-09-18 22:31:36,165 - root - INFO - Connected to Milvus at milvus-standalone:19530
2025-09-18 22:31:36,165 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-09-18 22:31:36,165 - sqlalchemy.engine.Engine - INFO - Select 1
2025-09-18 22:31:36,166 - sqlalchemy.engine.Engine - INFO - [cached since 5324s ago] {}
2025-09-18 22:31:36,746 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-09-18 22:31:36,747 - rag_solution.file_management.database - INFO - Database session closed.
2025-09-18 22:31:46,861 - core.authentication_middleware - INFO - AuthMiddleware: Processing request to /api/auth/me
2025-09-18 22:31:46,873 - core.authentication_middleware - INFO - AuthMiddleware: Mock user ready with ID: 1aa5093c-084e-4f20-905b-cf5e18301b1c
2025-09-18 22:31:46,873 - core.authentication_middleware - INFO - AuthMiddleware: Using created mock user UUID: 1aa5093c-084e-4f20-905b-cf5e18301b1c
2025-09-18 22:31:46,875 - core.authentication_middleware - INFO - AuthMiddleware: Processing request to /api/collections
2025-09-18 22:31:46,885 - core.authentication_middleware - INFO - AuthMiddleware: Mock user ready with ID: 1aa5093c-084e-4f20-905b-cf5e18301b1c
2025-09-18 22:31:46,885 - core.authentication_middleware - INFO - AuthMiddleware: Using created mock user UUID: 1aa5093c-084e-4f20-905b-cf5e18301b1c
2025-09-18 22:31:46,885 - rag_solution.file_management.database - INFO - === DATABASE DEPENDENCY DEBUG ===
2025-09-18 22:31:46,886 - rag_solution.file_management.database - INFO - get_db() called - creating database session
2025-09-18 22:31:46,886 - rag_solution.file_management.database - INFO - === END DATABASE DEPENDENCY DEBUG ===
2025-09-18 22:31:46,886 - rag_solution.file_management.database - INFO - Creating a new database session.
2025-09-18 22:31:46,887 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-09-18 22:31:46,887 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE user_collection.user_id = %(user_id_1)s::UUID
2025-09-18 22:31:46,887 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'user_id_1': '1aa5093c-084e-4f20-905b-cf5e18301b1c'}
2025-09-18 22:31:46,891 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.ibm_id AS users_ibm_id, users.email AS users_email, users.name AS users_name, users.role AS users_role, users.preferred_provider_id AS users_preferred_provider_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id IN (%(primary_keys_1)s::UUID)
2025-09-18 22:31:46,892 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'primary_keys_1': UUID('1aa5093c-084e-4f20-905b-cf5e18301b1c')}
2025-09-18 22:31:46,893 - sqlalchemy.engine.Engine - INFO - SELECT collections.id AS collections_id, collections.name AS collections_name, collections.vector_db_name AS collections_vector_db_name, collections.status AS collections_status, collections.is_private AS collections_is_private, collections.created_at AS collections_created_at, collections.updated_at AS collections_updated_at 
FROM collections 
WHERE collections.id IN (%(primary_keys_1)s::UUID, %(primary_keys_2)s::UUID, %(primary_keys_3)s::UUID, %(primary_keys_4)s::UUID, %(primary_keys_5)s::UUID, %(primary_keys_6)s::UUID, %(primary_keys_7)s::UUID, %(primary_keys_8)s::UUID, %(primary_keys_9)s::UUID, %(primary_keys_10)s::UUID, %(primary_keys_11)s::UUID, %(primary_keys_12)s::UUID, %(primary_keys_13)s::UUID, %(primary_keys_14)s::UUID, %(primary_keys_15)s::UUID, %(primary_keys_16)s::UUID, %(primary_keys_17)s::UUID, %(primary_keys_18)s::UUID, %(primary_keys_19)s::UUID, %(primary_keys_20)s::UUID, %(primary_keys_21)s::UUID, %(primary_keys_22)s::UUID, %(primary_keys_23)s::UUID, %(primary_keys_24)s::UUID, %(primary_keys_25)s::UUID, %(primary_keys_26)s::UUID, %(primary_keys_27)s::UUID, %(primary_keys_28)s::UUID, %(primary_keys_29)s::UUID, %(primary_keys_30)s::UUID, %(primary_keys_31)s::UUID, %(primary_keys_32)s::UUID, %(primary_keys_33)s::UUID, %(primary_keys_34)s::UUID, %(primary_keys_35)s::UUID, %(primary_keys_36)s::UUID, %(primary_keys_37)s::UUID, %(primary_keys_38)s::UUID, %(primary_keys_39)s::UUID, %(primary_keys_40)s::UUID, %(primary_keys_41)s::UUID, %(primary_keys_42)s::UUID, %(primary_keys_43)s::UUID, %(primary_keys_44)s::UUID, %(primary_keys_45)s::UUID, %(primary_keys_46)s::UUID, %(primary_keys_47)s::UUID, %(primary_keys_48)s::UUID, %(primary_keys_49)s::UUID, %(primary_keys_50)s::UUID, %(primary_keys_51)s::UUID)
2025-09-18 22:31:46,893 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'primary_keys_1': UUID('0839a2d8-ac89-499d-ad86-a9ab45bec723'), 'primary_keys_2': UUID('0840b01f-56e4-4bde-902c-2df1f5254b0b'), 'primary_keys_3': UUID('12be5300-84ef-4a0c-be97-97dad9ab23e4'), 'primary_keys_4': UUID('247f9599-4d4d-4cb1-aca4-5c659bc15160'), 'primary_keys_5': UUID('2758fa08-9ab2-4dba-9db6-f558d9f1e2f3'), 'primary_keys_6': UUID('2aeb1af4-f5b4-4bcf-b337-c8774a4dd51f'), 'primary_keys_7': UUID('2fac5ba8-6d46-46b1-adfb-fb04c86bf8d5'), 'primary_keys_8': UUID('3c36ff43-e456-4c70-ba1f-fa437efefb9b'), 'primary_keys_9': UUID('3d68f56c-892e-4f4c-9e77-5bcaa4b6ac8d'), 'primary_keys_10': UUID('4bf091ee-3097-4bf9-99cc-19ddc5902926'), 'primary_keys_11': UUID('57b7788e-eda1-415d-ac8c-fa2dcff6ccc5'), 'primary_keys_12': UUID('5974d6f5-ac4a-4ba5-8c40-06e2711f5390'), 'primary_keys_13': UUID('5c4c7817-5440-48a5-97c7-33b65b58e452'), 'primary_keys_14': UUID('5d4ddabf-b3d3-4ea9-950a-850f84e7ad27'), 'primary_keys_15': UUID('6ce5a43b-85f9-441f-90e9-9e711372fc91'), 'primary_keys_16': UUID('77b917d6-3fb4-40c6-b8bd-858fb593d6a7'), 'primary_keys_17': UUID('7a509018-97e3-4b18-a6e4-71a7f5773da8'), 'primary_keys_18': UUID('7f7be59f-22d6-4aac-97cc-693b1d6cd69d'), 'primary_keys_19': UUID('81050cc2-e429-4ce3-ac76-8a18f438d8bd'), 'primary_keys_20': UUID('8ed26821-01ba-42c0-83c9-f7062faa5338'), 'primary_keys_21': UUID('9384465b-e172-49dc-afe1-aed5badc98cb'), 'primary_keys_22': UUID('93e7cf47-1147-41a0-a48c-916d918210e1'), 'primary_keys_23': UUID('973b4c73-918f-4edf-b67c-1a2b9b8cb888'), 'primary_keys_24': UUID('988ff86b-e1cd-4504-a293-3ec152ce15f0'), 'primary_keys_25': UUID('ab048f99-f6fd-44e9-b776-78629e17e03e'), 'primary_keys_26': UUID('af04fe36-ecd2-42c4-b7c6-a13a6e1327d2'), 'primary_keys_27': UUID('b228dd69-1f58-460a-988a-482192b83ef0'), 'primary_keys_28': UUID('b39aa578-88f6-4534-b0b2-412dc03a58e8'), 'primary_keys_29': UUID('be5f792b-9cf9-4aa4-8a8a-318587daa10a'), 'primary_keys_30': UUID('c5e2f9ad-e20f-4f86-8689-7f8f1a57a346'), 'primary_keys_31': UUID('c8f83a10-db12-4679-b7ce-a6df8ad3a294'), 'primary_keys_32': UUID('ca4b3eef-3d0e-4ace-8030-228c3df95b94'), 'primary_keys_33': UUID('cc69ba15-40b3-4112-b04f-0e5f32095b57'), 'primary_keys_34': UUID('cdf5cfda-6f57-4528-ad07-fdd94f6301e9'), 'primary_keys_35': UUID('cfe7993f-f011-4aa5-8235-70f2116fbcff'), 'primary_keys_36': UUID('d158762b-610d-490d-86f1-f87d577d901d'), 'primary_keys_37': UUID('d25d93f7-513a-439c-bf15-51fc0a2ad736'), 'primary_keys_38': UUID('d2f337cc-a550-49ab-9197-1688ace64a23'), 'primary_keys_39': UUID('d4a8f6c6-da84-4449-8971-1aa12c68f071'), 'primary_keys_40': UUID('d84c8495-c1d2-4db1-9b2a-ec86305fbe5f'), 'primary_keys_41': UUID('db523922-4ea2-414e-bfb8-ab937eae02a7'), 'primary_keys_42': UUID('e41b39e1-6e0d-42f4-a611-9370fb219c06'), 'primary_keys_43': UUID('e641b71c-fb41-4e3b-9ff3-e2be6ea88b73'), 'primary_keys_44': UUID('ed67bec0-ea64-4393-bebb-39d02e0c5e99'), 'primary_keys_45': UUID('ed8b96dc-4ddc-4964-be8d-6bcfa341f17c'), 'primary_keys_46': UUID('ef7df247-a7c9-40c3-a036-f40a32fa2608'), 'primary_keys_47': UUID('f22e3d5b-b224-4a73-86b2-af73186b7ed4'), 'primary_keys_48': UUID('f5e7e805-02d4-4916-988e-a548aaf64395'), 'primary_keys_49': UUID('f7349d18-88f5-45b3-9627-525996be048b'), 'primary_keys_50': UUID('fc4cc8fa-f109-4548-b6b7-203d1998b914'), 'primary_keys_51': UUID('fef1a7fa-36aa-4155-9971-a0561c3b3cf4')}
2025-09-18 22:31:46,896 - sqlalchemy.engine.Engine - INFO - SELECT files.collection_id AS files_collection_id, files.id AS files_id, files.user_id AS files_user_id, files.filename AS files_filename, files.file_path AS files_file_path, files.file_type AS files_file_type, files.document_id AS files_document_id, files.file_metadata AS files_file_metadata, files.created_at AS files_created_at, files.updated_at AS files_updated_at 
FROM files 
WHERE files.collection_id IN (%(primary_keys_1)s::UUID, %(primary_keys_2)s::UUID, %(primary_keys_3)s::UUID, %(primary_keys_4)s::UUID, %(primary_keys_5)s::UUID, %(primary_keys_6)s::UUID, %(primary_keys_7)s::UUID, %(primary_keys_8)s::UUID, %(primary_keys_9)s::UUID, %(primary_keys_10)s::UUID, %(primary_keys_11)s::UUID, %(primary_keys_12)s::UUID, %(primary_keys_13)s::UUID, %(primary_keys_14)s::UUID, %(primary_keys_15)s::UUID, %(primary_keys_16)s::UUID, %(primary_keys_17)s::UUID, %(primary_keys_18)s::UUID, %(primary_keys_19)s::UUID, %(primary_keys_20)s::UUID, %(primary_keys_21)s::UUID, %(primary_keys_22)s::UUID, %(primary_keys_23)s::UUID, %(primary_keys_24)s::UUID, %(primary_keys_25)s::UUID, %(primary_keys_26)s::UUID, %(primary_keys_27)s::UUID, %(primary_keys_28)s::UUID, %(primary_keys_29)s::UUID, %(primary_keys_30)s::UUID, %(primary_keys_31)s::UUID, %(primary_keys_32)s::UUID, %(primary_keys_33)s::UUID, %(primary_keys_34)s::UUID, %(primary_keys_35)s::UUID, %(primary_keys_36)s::UUID, %(primary_keys_37)s::UUID, %(primary_keys_38)s::UUID, %(primary_keys_39)s::UUID, %(primary_keys_40)s::UUID, %(primary_keys_41)s::UUID, %(primary_keys_42)s::UUID, %(primary_keys_43)s::UUID, %(primary_keys_44)s::UUID, %(primary_keys_45)s::UUID, %(primary_keys_46)s::UUID, %(primary_keys_47)s::UUID, %(primary_keys_48)s::UUID, %(primary_keys_49)s::UUID, %(primary_keys_50)s::UUID, %(primary_keys_51)s::UUID)
2025-09-18 22:31:46,896 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'primary_keys_1': UUID('57b7788e-eda1-415d-ac8c-fa2dcff6ccc5'), 'primary_keys_2': UUID('fef1a7fa-36aa-4155-9971-a0561c3b3cf4'), 'primary_keys_3': UUID('77b917d6-3fb4-40c6-b8bd-858fb593d6a7'), 'primary_keys_4': UUID('247f9599-4d4d-4cb1-aca4-5c659bc15160'), 'primary_keys_5': UUID('0840b01f-56e4-4bde-902c-2df1f5254b0b'), 'primary_keys_6': UUID('6ce5a43b-85f9-441f-90e9-9e711372fc91'), 'primary_keys_7': UUID('ed8b96dc-4ddc-4964-be8d-6bcfa341f17c'), 'primary_keys_8': UUID('d25d93f7-513a-439c-bf15-51fc0a2ad736'), 'primary_keys_9': UUID('f22e3d5b-b224-4a73-86b2-af73186b7ed4'), 'primary_keys_10': UUID('7a509018-97e3-4b18-a6e4-71a7f5773da8'), 'primary_keys_11': UUID('7f7be59f-22d6-4aac-97cc-693b1d6cd69d'), 'primary_keys_12': UUID('cc69ba15-40b3-4112-b04f-0e5f32095b57'), 'primary_keys_13': UUID('2fac5ba8-6d46-46b1-adfb-fb04c86bf8d5'), 'primary_keys_14': UUID('12be5300-84ef-4a0c-be97-97dad9ab23e4'), 'primary_keys_15': UUID('b39aa578-88f6-4534-b0b2-412dc03a58e8'), 'primary_keys_16': UUID('2aeb1af4-f5b4-4bcf-b337-c8774a4dd51f'), 'primary_keys_17': UUID('be5f792b-9cf9-4aa4-8a8a-318587daa10a'), 'primary_keys_18': UUID('3d68f56c-892e-4f4c-9e77-5bcaa4b6ac8d'), 'primary_keys_19': UUID('c8f83a10-db12-4679-b7ce-a6df8ad3a294'), 'primary_keys_20': UUID('db523922-4ea2-414e-bfb8-ab937eae02a7'), 'primary_keys_21': UUID('e41b39e1-6e0d-42f4-a611-9370fb219c06'), 'primary_keys_22': UUID('fc4cc8fa-f109-4548-b6b7-203d1998b914'), 'primary_keys_23': UUID('3c36ff43-e456-4c70-ba1f-fa437efefb9b'), 'primary_keys_24': UUID('c5e2f9ad-e20f-4f86-8689-7f8f1a57a346'), 'primary_keys_25': UUID('4bf091ee-3097-4bf9-99cc-19ddc5902926'), 'primary_keys_26': UUID('9384465b-e172-49dc-afe1-aed5badc98cb'), 'primary_keys_27': UUID('d2f337cc-a550-49ab-9197-1688ace64a23'), 'primary_keys_28': UUID('ca4b3eef-3d0e-4ace-8030-228c3df95b94'), 'primary_keys_29': UUID('2758fa08-9ab2-4dba-9db6-f558d9f1e2f3'), 'primary_keys_30': UUID('f5e7e805-02d4-4916-988e-a548aaf64395'), 'primary_keys_31': UUID('988ff86b-e1cd-4504-a293-3ec152ce15f0'), 'primary_keys_32': UUID('b228dd69-1f58-460a-988a-482192b83ef0'), 'primary_keys_33': UUID('d4a8f6c6-da84-4449-8971-1aa12c68f071'), 'primary_keys_34': UUID('5974d6f5-ac4a-4ba5-8c40-06e2711f5390'), 'primary_keys_35': UUID('cfe7993f-f011-4aa5-8235-70f2116fbcff'), 'primary_keys_36': UUID('973b4c73-918f-4edf-b67c-1a2b9b8cb888'), 'primary_keys_37': UUID('ab048f99-f6fd-44e9-b776-78629e17e03e'), 'primary_keys_38': UUID('d158762b-610d-490d-86f1-f87d577d901d'), 'primary_keys_39': UUID('d84c8495-c1d2-4db1-9b2a-ec86305fbe5f'), 'primary_keys_40': UUID('af04fe36-ecd2-42c4-b7c6-a13a6e1327d2'), 'primary_keys_41': UUID('81050cc2-e429-4ce3-ac76-8a18f438d8bd'), 'primary_keys_42': UUID('93e7cf47-1147-41a0-a48c-916d918210e1'), 'primary_keys_43': UUID('f7349d18-88f5-45b3-9627-525996be048b'), 'primary_keys_44': UUID('ed67bec0-ea64-4393-bebb-39d02e0c5e99'), 'primary_keys_45': UUID('0839a2d8-ac89-499d-ad86-a9ab45bec723'), 'primary_keys_46': UUID('cdf5cfda-6f57-4528-ad07-fdd94f6301e9'), 'primary_keys_47': UUID('8ed26821-01ba-42c0-83c9-f7062faa5338'), 'primary_keys_48': UUID('5c4c7817-5440-48a5-97c7-33b65b58e452'), 'primary_keys_49': UUID('ef7df247-a7c9-40c3-a036-f40a32fa2608'), 'primary_keys_50': UUID('5d4ddabf-b3d3-4ea9-950a-850f84e7ad27'), 'primary_keys_51': UUID('e641b71c-fb41-4e3b-9ff3-e2be6ea88b73')}
2025-09-18 22:31:46,898 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,899 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('57b7788e-eda1-415d-ac8c-fa2dcff6ccc5')}
2025-09-18 22:31:46,900 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,900 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('fef1a7fa-36aa-4155-9971-a0561c3b3cf4')}
2025-09-18 22:31:46,900 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,901 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('77b917d6-3fb4-40c6-b8bd-858fb593d6a7')}
2025-09-18 22:31:46,901 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,902 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('247f9599-4d4d-4cb1-aca4-5c659bc15160')}
2025-09-18 22:31:46,902 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,902 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('0840b01f-56e4-4bde-902c-2df1f5254b0b')}
2025-09-18 22:31:46,903 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,903 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('6ce5a43b-85f9-441f-90e9-9e711372fc91')}
2025-09-18 22:31:46,904 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,904 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('ed8b96dc-4ddc-4964-be8d-6bcfa341f17c')}
2025-09-18 22:31:46,904 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,905 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('d25d93f7-513a-439c-bf15-51fc0a2ad736')}
2025-09-18 22:31:46,905 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,905 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('f22e3d5b-b224-4a73-86b2-af73186b7ed4')}
2025-09-18 22:31:46,906 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,906 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('7a509018-97e3-4b18-a6e4-71a7f5773da8')}
2025-09-18 22:31:46,907 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,907 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('cc69ba15-40b3-4112-b04f-0e5f32095b57')}
2025-09-18 22:31:46,907 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,908 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('12be5300-84ef-4a0c-be97-97dad9ab23e4')}
2025-09-18 22:31:46,908 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,908 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('b39aa578-88f6-4534-b0b2-412dc03a58e8')}
2025-09-18 22:31:46,909 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,909 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('be5f792b-9cf9-4aa4-8a8a-318587daa10a')}
2025-09-18 22:31:46,910 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,910 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('c8f83a10-db12-4679-b7ce-a6df8ad3a294')}
2025-09-18 22:31:46,910 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,911 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('db523922-4ea2-414e-bfb8-ab937eae02a7')}
2025-09-18 22:31:46,911 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,911 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('e41b39e1-6e0d-42f4-a611-9370fb219c06')}
2025-09-18 22:31:46,912 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,912 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('2fac5ba8-6d46-46b1-adfb-fb04c86bf8d5')}
2025-09-18 22:31:46,913 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,913 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('3d68f56c-892e-4f4c-9e77-5bcaa4b6ac8d')}
2025-09-18 22:31:46,913 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,914 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('fc4cc8fa-f109-4548-b6b7-203d1998b914')}
2025-09-18 22:31:46,914 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,914 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('3c36ff43-e456-4c70-ba1f-fa437efefb9b')}
2025-09-18 22:31:46,914 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,915 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('4bf091ee-3097-4bf9-99cc-19ddc5902926')}
2025-09-18 22:31:46,915 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,915 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('9384465b-e172-49dc-afe1-aed5badc98cb')}
2025-09-18 22:31:46,915 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,916 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('ca4b3eef-3d0e-4ace-8030-228c3df95b94')}
2025-09-18 22:31:46,916 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,916 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('f5e7e805-02d4-4916-988e-a548aaf64395')}
2025-09-18 22:31:46,916 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,917 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('2aeb1af4-f5b4-4bcf-b337-c8774a4dd51f')}
2025-09-18 22:31:46,917 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,917 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('c5e2f9ad-e20f-4f86-8689-7f8f1a57a346')}
2025-09-18 22:31:46,917 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,918 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('2758fa08-9ab2-4dba-9db6-f558d9f1e2f3')}
2025-09-18 22:31:46,918 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,918 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('b228dd69-1f58-460a-988a-482192b83ef0')}
2025-09-18 22:31:46,919 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,919 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('d4a8f6c6-da84-4449-8971-1aa12c68f071')}
2025-09-18 22:31:46,919 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,919 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('7f7be59f-22d6-4aac-97cc-693b1d6cd69d')}
2025-09-18 22:31:46,920 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,920 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('988ff86b-e1cd-4504-a293-3ec152ce15f0')}
2025-09-18 22:31:46,920 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,920 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('cfe7993f-f011-4aa5-8235-70f2116fbcff')}
2025-09-18 22:31:46,921 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,921 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('973b4c73-918f-4edf-b67c-1a2b9b8cb888')}
2025-09-18 22:31:46,921 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,921 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('5974d6f5-ac4a-4ba5-8c40-06e2711f5390')}
2025-09-18 22:31:46,922 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,922 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('ab048f99-f6fd-44e9-b776-78629e17e03e')}
2025-09-18 22:31:46,922 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,923 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('d2f337cc-a550-49ab-9197-1688ace64a23')}
2025-09-18 22:31:46,923 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,923 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('d158762b-610d-490d-86f1-f87d577d901d')}
2025-09-18 22:31:46,924 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,924 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('d84c8495-c1d2-4db1-9b2a-ec86305fbe5f')}
2025-09-18 22:31:46,924 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,924 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('af04fe36-ecd2-42c4-b7c6-a13a6e1327d2')}
2025-09-18 22:31:46,925 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,925 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('81050cc2-e429-4ce3-ac76-8a18f438d8bd')}
2025-09-18 22:31:46,925 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,926 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('93e7cf47-1147-41a0-a48c-916d918210e1')}
2025-09-18 22:31:46,926 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,926 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('f7349d18-88f5-45b3-9627-525996be048b')}
2025-09-18 22:31:46,927 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,927 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('ed67bec0-ea64-4393-bebb-39d02e0c5e99')}
2025-09-18 22:31:46,927 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,927 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('0839a2d8-ac89-499d-ad86-a9ab45bec723')}
2025-09-18 22:31:46,928 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,928 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('cdf5cfda-6f57-4528-ad07-fdd94f6301e9')}
2025-09-18 22:31:46,928 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,929 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('8ed26821-01ba-42c0-83c9-f7062faa5338')}
2025-09-18 22:31:46,929 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,929 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('5c4c7817-5440-48a5-97c7-33b65b58e452')}
2025-09-18 22:31:46,929 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,930 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('ef7df247-a7c9-40c3-a036-f40a32fa2608')}
2025-09-18 22:31:46,930 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,930 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('5d4ddabf-b3d3-4ea9-950a-850f84e7ad27')}
2025-09-18 22:31:46,931 - sqlalchemy.engine.Engine - INFO - SELECT user_collection.user_id AS user_collection_user_id, user_collection.collection_id AS user_collection_collection_id, user_collection.joined_at AS user_collection_joined_at 
FROM user_collection 
WHERE %(param_1)s::UUID = user_collection.collection_id
2025-09-18 22:31:46,931 - sqlalchemy.engine.Engine - INFO - [cached since 5206s ago] {'param_1': UUID('e641b71c-fb41-4e3b-9ff3-e2be6ea88b73')}
2025-09-18 22:31:46,932 - router.collections - INFO - Retrieved 51 collections for user 1aa5093c-084e-4f20-905b-cf5e18301b1c
2025-09-18 22:31:46,932 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-09-18 22:31:46,933 - rag_solution.file_management.database - INFO - Database session closed.
2025-09-18 22:31:46,935 - core.authentication_middleware - INFO - AuthMiddleware: Processing request to /api/auth/me
2025-09-18 22:31:46,942 - core.authentication_middleware - INFO - AuthMiddleware: Mock user ready with ID: 1aa5093c-084e-4f20-905b-cf5e18301b1c
2025-09-18 22:31:46,942 - core.authentication_middleware - INFO - AuthMiddleware: Using created mock user UUID: 1aa5093c-084e-4f20-905b-cf5e18301b1c
2025-09-18 22:31:46,944 - core.authentication_middleware - INFO - AuthMiddleware: Processing request to /api/search
2025-09-18 22:31:46,954 - core.authentication_middleware - INFO - AuthMiddleware: Mock user ready with ID: 1aa5093c-084e-4f20-905b-cf5e18301b1c
2025-09-18 22:31:46,954 - core.authentication_middleware - INFO - AuthMiddleware: Using created mock user UUID: 1aa5093c-084e-4f20-905b-cf5e18301b1c
2025-09-18 22:31:46,955 - rag_solution.file_management.database - INFO - === DATABASE DEPENDENCY DEBUG ===
2025-09-18 22:31:46,956 - rag_solution.file_management.database - INFO - get_db() called - creating database session
2025-09-18 22:31:46,956 - rag_solution.file_management.database - INFO - === END DATABASE DEPENDENCY DEBUG ===
2025-09-18 22:31:46,956 - rag_solution.file_management.database - INFO - Creating a new database session.
2025-09-18 22:31:46,957 - services.search - INFO - Starting search operation
2025-09-18 22:31:46,960 - root - INFO - Connected to Milvus at milvus-standalone:19530
2025-09-18 22:31:46,961 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-09-18 22:31:46,961 - sqlalchemy.engine.Engine - INFO - SELECT anon_1.collections_id AS anon_1_collections_id, anon_1.collections_name AS anon_1_collections_name, anon_1.collections_vector_db_name AS anon_1_collections_vector_db_name, anon_1.collections_status AS anon_1_collections_status, anon_1.collections_is_private AS anon_1_collections_is_private, anon_1.collections_created_at AS anon_1_collections_created_at, anon_1.collections_updated_at AS anon_1_collections_updated_at, files_1.id AS files_1_id, files_1.user_id AS files_1_user_id, files_1.collection_id AS files_1_collection_id, files_1.filename AS files_1_filename, files_1.file_path AS files_1_file_path, files_1.file_type AS files_1_file_type, files_1.document_id AS files_1_document_id, files_1.file_metadata AS files_1_file_metadata, files_1.created_at AS files_1_created_at, files_1.updated_at AS files_1_updated_at, user_collection_1.user_id AS user_collection_1_user_id, user_collection_1.collection_id AS user_collection_1_collection_id, user_collection_1.joined_at AS user_collection_1_joined_at 
FROM (SELECT collections.id AS collections_id, collections.name AS collections_name, collections.vector_db_name AS collections_vector_db_name, collections.status AS collections_status, collections.is_private AS collections_is_private, collections.created_at AS collections_created_at, collections.updated_at AS collections_updated_at 
FROM collections 
WHERE collections.id = %(id_1)s::UUID 
 LIMIT %(param_1)s) AS anon_1 LEFT OUTER JOIN files AS files_1 ON anon_1.collections_id = files_1.collection_id LEFT OUTER JOIN user_collection AS user_collection_1 ON anon_1.collections_id = user_collection_1.collection_id
2025-09-18 22:31:46,962 - sqlalchemy.engine.Engine - INFO - [cached since 921.2s ago] {'id_1': UUID('e641b71c-fb41-4e3b-9ff3-e2be6ea88b73'), 'param_1': 1}
2025-09-18 22:31:46,963 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.ibm_id AS users_ibm_id, users.email AS users_email, users.name AS users_name, users.role AS users_role, users.preferred_provider_id AS users_preferred_provider_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id IN (%(primary_keys_1)s::UUID)
2025-09-18 22:31:46,964 - sqlalchemy.engine.Engine - INFO - [cached since 921.2s ago] {'primary_keys_1': UUID('1aa5093c-084e-4f20-905b-cf5e18301b1c')}
2025-09-18 22:31:46,966 - services.search - INFO - Using Chain of Thought for enhanced reasoning
2025-09-18 22:31:46,969 - services.search - WARNING - Chain of Thought failed, falling back to regular search: 'ChainOfThoughtOutput' object has no attribute 'source_attributions'
2025-09-18 22:31:46,969 - rag_solution.query_rewriting.query_rewriter - INFO - Initialized QueryRewriter with 1 rewriters
2025-09-18 22:31:46,973 - root - INFO - Connected to Milvus at milvus-standalone:19530
2025-09-18 22:31:46,974 - sqlalchemy.engine.Engine - INFO - SELECT pipeline_configs.id AS pipeline_configs_id, pipeline_configs.user_id AS pipeline_configs_user_id, pipeline_configs.collection_id AS pipeline_configs_collection_id, pipeline_configs.name AS pipeline_configs_name, pipeline_configs.description AS pipeline_configs_description, pipeline_configs.chunking_strategy AS pipeline_configs_chunking_strategy, pipeline_configs.embedding_model AS pipeline_configs_embedding_model, pipeline_configs.retriever AS pipeline_configs_retriever, pipeline_configs.context_strategy AS pipeline_configs_context_strategy, pipeline_configs.enable_logging AS pipeline_configs_enable_logging, pipeline_configs.max_context_length AS pipeline_configs_max_context_length, pipeline_configs.timeout AS pipeline_configs_timeout, pipeline_configs.config_metadata AS pipeline_configs_config_metadata, pipeline_configs.is_default AS pipeline_configs_is_default, pipeline_configs.provider_id AS pipeline_configs_provider_id, pipeline_configs.created_at AS pipeline_configs_created_at, pipeline_configs.updated_at AS pipeline_configs_updated_at 
FROM pipeline_configs 
WHERE pipeline_configs.user_id = %(user_id_1)s::UUID AND pipeline_configs.collection_id IS NULL AND pipeline_configs.is_default IS true 
 LIMIT %(param_1)s
2025-09-18 22:31:46,974 - sqlalchemy.engine.Engine - INFO - [cached since 921.2s ago] {'user_id_1': UUID('1aa5093c-084e-4f20-905b-cf5e18301b1c'), 'param_1': 1}
2025-09-18 22:31:46,976 - sqlalchemy.engine.Engine - INFO - SELECT llm_providers.id AS llm_providers_id, llm_providers.name AS llm_providers_name, llm_providers.base_url AS llm_providers_base_url, llm_providers.api_key AS llm_providers_api_key, llm_providers.org_id AS llm_providers_org_id, llm_providers.project_id AS llm_providers_project_id, llm_providers.is_active AS llm_providers_is_active, llm_providers.created_at AS llm_providers_created_at, llm_providers.updated_at AS llm_providers_updated_at, llm_providers.is_default AS llm_providers_is_default 
FROM llm_providers 
WHERE llm_providers.id IN (%(primary_keys_1)s::UUID)
2025-09-18 22:31:46,976 - sqlalchemy.engine.Engine - INFO - [cached since 921.2s ago] {'primary_keys_1': UUID('7830c374-87a0-477c-b649-ecf2aae17677')}
2025-09-18 22:31:46,978 - sqlalchemy.engine.Engine - INFO - SELECT pipeline_configs.id AS pipeline_configs_id, pipeline_configs.user_id AS pipeline_configs_user_id, pipeline_configs.collection_id AS pipeline_configs_collection_id, pipeline_configs.name AS pipeline_configs_name, pipeline_configs.description AS pipeline_configs_description, pipeline_configs.chunking_strategy AS pipeline_configs_chunking_strategy, pipeline_configs.embedding_model AS pipeline_configs_embedding_model, pipeline_configs.retriever AS pipeline_configs_retriever, pipeline_configs.context_strategy AS pipeline_configs_context_strategy, pipeline_configs.enable_logging AS pipeline_configs_enable_logging, pipeline_configs.max_context_length AS pipeline_configs_max_context_length, pipeline_configs.timeout AS pipeline_configs_timeout, pipeline_configs.config_metadata AS pipeline_configs_config_metadata, pipeline_configs.is_default AS pipeline_configs_is_default, pipeline_configs.provider_id AS pipeline_configs_provider_id, pipeline_configs.created_at AS pipeline_configs_created_at, pipeline_configs.updated_at AS pipeline_configs_updated_at 
FROM pipeline_configs 
WHERE pipeline_configs.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-09-18 22:31:46,979 - sqlalchemy.engine.Engine - INFO - [cached since 921.2s ago] {'id_1': UUID('c1c70b3f-f303-40b8-9765-f8db58caa5a0'), 'param_1': 1}
2025-09-18 22:31:46,980 - sqlalchemy.engine.Engine - INFO - SELECT llm_providers.id AS llm_providers_id, llm_providers.name AS llm_providers_name, llm_providers.base_url AS llm_providers_base_url, llm_providers.api_key AS llm_providers_api_key, llm_providers.org_id AS llm_providers_org_id, llm_providers.project_id AS llm_providers_project_id, llm_providers.is_active AS llm_providers_is_active, llm_providers.created_at AS llm_providers_created_at, llm_providers.updated_at AS llm_providers_updated_at, llm_providers.is_default AS llm_providers_is_default 
FROM llm_providers 
WHERE llm_providers.id IN (%(primary_keys_1)s::UUID)
2025-09-18 22:31:46,981 - sqlalchemy.engine.Engine - INFO - [cached since 921.2s ago] {'primary_keys_1': UUID('7830c374-87a0-477c-b649-ecf2aae17677')}
2025-09-18 22:31:46,982 - sqlalchemy.engine.Engine - INFO - SELECT anon_1.collections_id AS anon_1_collections_id, anon_1.collections_name AS anon_1_collections_name, anon_1.collections_vector_db_name AS anon_1_collections_vector_db_name, anon_1.collections_status AS anon_1_collections_status, anon_1.collections_is_private AS anon_1_collections_is_private, anon_1.collections_created_at AS anon_1_collections_created_at, anon_1.collections_updated_at AS anon_1_collections_updated_at, files_1.id AS files_1_id, files_1.user_id AS files_1_user_id, files_1.collection_id AS files_1_collection_id, files_1.filename AS files_1_filename, files_1.file_path AS files_1_file_path, files_1.file_type AS files_1_file_type, files_1.document_id AS files_1_document_id, files_1.file_metadata AS files_1_file_metadata, files_1.created_at AS files_1_created_at, files_1.updated_at AS files_1_updated_at, user_collection_1.user_id AS user_collection_1_user_id, user_collection_1.collection_id AS user_collection_1_collection_id, user_collection_1.joined_at AS user_collection_1_joined_at 
FROM (SELECT collections.id AS collections_id, collections.name AS collections_name, collections.vector_db_name AS collections_vector_db_name, collections.status AS collections_status, collections.is_private AS collections_is_private, collections.created_at AS collections_created_at, collections.updated_at AS collections_updated_at 
FROM collections 
WHERE collections.id = %(id_1)s::UUID 
 LIMIT %(param_1)s) AS anon_1 LEFT OUTER JOIN files AS files_1 ON anon_1.collections_id = files_1.collection_id LEFT OUTER JOIN user_collection AS user_collection_1 ON anon_1.collections_id = user_collection_1.collection_id
2025-09-18 22:31:46,982 - sqlalchemy.engine.Engine - INFO - [cached since 921.2s ago] {'id_1': UUID('e641b71c-fb41-4e3b-9ff3-e2be6ea88b73'), 'param_1': 1}
2025-09-18 22:31:46,984 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.ibm_id AS users_ibm_id, users.email AS users_email, users.name AS users_name, users.role AS users_role, users.preferred_provider_id AS users_preferred_provider_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id IN (%(primary_keys_1)s::UUID)
2025-09-18 22:31:46,984 - sqlalchemy.engine.Engine - INFO - [cached since 921.2s ago] {'primary_keys_1': UUID('1aa5093c-084e-4f20-905b-cf5e18301b1c')}
2025-09-18 22:31:46,987 - root - INFO - Collection 'collection_b1ef216cb22545f48e464c98e000e2e7' already exists
2025-09-18 22:31:46,991 - services.pipeline - INFO - Created collection collection_b1ef216cb22545f48e464c98e000e2e7 in vector store
2025-09-18 22:31:46,991 - services.pipeline - INFO - Pipeline initialized for collection: collection_b1ef216cb22545f48e464c98e000e2e7
2025-09-18 22:31:46,991 - services.pipeline - INFO - Starting RAG pipeline execution
2025-09-18 22:31:46,991 - services.pipeline - INFO - **** Validating configuration for user_id: 1aa5093c-084e-4f20-905b-cf5e18301b1c
2025-09-18 22:31:46,992 - sqlalchemy.engine.Engine - INFO - SELECT pipeline_configs.id AS pipeline_configs_id, pipeline_configs.user_id AS pipeline_configs_user_id, pipeline_configs.collection_id AS pipeline_configs_collection_id, pipeline_configs.name AS pipeline_configs_name, pipeline_configs.description AS pipeline_configs_description, pipeline_configs.chunking_strategy AS pipeline_configs_chunking_strategy, pipeline_configs.embedding_model AS pipeline_configs_embedding_model, pipeline_configs.retriever AS pipeline_configs_retriever, pipeline_configs.context_strategy AS pipeline_configs_context_strategy, pipeline_configs.enable_logging AS pipeline_configs_enable_logging, pipeline_configs.max_context_length AS pipeline_configs_max_context_length, pipeline_configs.timeout AS pipeline_configs_timeout, pipeline_configs.config_metadata AS pipeline_configs_config_metadata, pipeline_configs.is_default AS pipeline_configs_is_default, pipeline_configs.provider_id AS pipeline_configs_provider_id, pipeline_configs.created_at AS pipeline_configs_created_at, pipeline_configs.updated_at AS pipeline_configs_updated_at 
FROM pipeline_configs 
WHERE pipeline_configs.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-09-18 22:31:46,992 - sqlalchemy.engine.Engine - INFO - [cached since 921.2s ago] {'id_1': UUID('c1c70b3f-f303-40b8-9765-f8db58caa5a0'), 'param_1': 1}
2025-09-18 22:31:46,993 - sqlalchemy.engine.Engine - INFO - SELECT llm_providers.id AS llm_providers_id, llm_providers.name AS llm_providers_name, llm_providers.base_url AS llm_providers_base_url, llm_providers.api_key AS llm_providers_api_key, llm_providers.org_id AS llm_providers_org_id, llm_providers.project_id AS llm_providers_project_id, llm_providers.is_active AS llm_providers_is_active, llm_providers.created_at AS llm_providers_created_at, llm_providers.updated_at AS llm_providers_updated_at, llm_providers.is_default AS llm_providers_is_default 
FROM llm_providers 
WHERE llm_providers.id IN (%(primary_keys_1)s::UUID)
2025-09-18 22:31:46,993 - sqlalchemy.engine.Engine - INFO - [cached since 921.2s ago] {'primary_keys_1': UUID('7830c374-87a0-477c-b649-ecf2aae17677')}
2025-09-18 22:31:46,993 - sqlalchemy.engine.Engine - INFO - SELECT llm_parameters.id AS llm_parameters_id, llm_parameters.user_id AS llm_parameters_user_id, llm_parameters.name AS llm_parameters_name, llm_parameters.description AS llm_parameters_description, llm_parameters.max_new_tokens AS llm_parameters_max_new_tokens, llm_parameters.temperature AS llm_parameters_temperature, llm_parameters.top_k AS llm_parameters_top_k, llm_parameters.top_p AS llm_parameters_top_p, llm_parameters.repetition_penalty AS llm_parameters_repetition_penalty, llm_parameters.is_default AS llm_parameters_is_default, llm_parameters.created_at AS llm_parameters_created_at, llm_parameters.updated_at AS llm_parameters_updated_at 
FROM llm_parameters 
WHERE llm_parameters.user_id = %(user_id_1)s::UUID AND llm_parameters.is_default IS true 
 LIMIT %(param_1)s
2025-09-18 22:31:46,994 - sqlalchemy.engine.Engine - INFO - [cached since 918.3s ago] {'user_id_1': UUID('1aa5093c-084e-4f20-905b-cf5e18301b1c'), 'param_1': 1}
2025-09-18 22:31:46,995 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.ibm_id AS users_ibm_id, users.email AS users_email, users.name AS users_name, users.role AS users_role, users.preferred_provider_id AS users_preferred_provider_id, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id IN (%(primary_keys_1)s::UUID)
2025-09-18 22:31:46,995 - sqlalchemy.engine.Engine - INFO - [cached since 918.3s ago] {'primary_keys_1': UUID('1aa5093c-084e-4f20-905b-cf5e18301b1c')}
2025-09-18 22:31:46,995 - sqlalchemy.engine.Engine - INFO - SELECT llm_providers.id AS llm_providers_id, llm_providers.name AS llm_providers_name, llm_providers.base_url AS llm_providers_base_url, llm_providers.api_key AS llm_providers_api_key, llm_providers.org_id AS llm_providers_org_id, llm_providers.project_id AS llm_providers_project_id, llm_providers.is_active AS llm_providers_is_active, llm_providers.created_at AS llm_providers_created_at, llm_providers.updated_at AS llm_providers_updated_at, llm_providers.is_default AS llm_providers_is_default 
FROM llm_providers 
WHERE llm_providers.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-09-18 22:31:46,996 - sqlalchemy.engine.Engine - INFO - [cached since 5419s ago] {'id_1': UUID('7830c374-87a0-477c-b649-ecf2aae17677'), 'param_1': 1}
2025-09-18 22:31:46,996 - llm.providers.WatsonXLLM - INFO - Initializing WatsonXLLM
2025-09-18 22:31:46,997 - sqlalchemy.engine.Engine - INFO - SELECT llm_providers.id AS llm_providers_id, llm_providers.name AS llm_providers_name, llm_providers.base_url AS llm_providers_base_url, llm_providers.api_key AS llm_providers_api_key, llm_providers.org_id AS llm_providers_org_id, llm_providers.project_id AS llm_providers_project_id, llm_providers.is_active AS llm_providers_is_active, llm_providers.created_at AS llm_providers_created_at, llm_providers.updated_at AS llm_providers_updated_at, llm_providers.is_default AS llm_providers_is_default 
FROM llm_providers 
WHERE llm_providers.name ILIKE %(name_1)s AND llm_providers.is_active 
 LIMIT %(param_1)s
2025-09-18 22:31:46,997 - sqlalchemy.engine.Engine - INFO - [cached since 918.3s ago] {'name_1': 'watsonx', 'param_1': 1}
2025-09-18 22:31:47,572 - sqlalchemy.engine.Engine - INFO - SELECT llm_models.id AS llm_models_id, llm_models.provider_id AS llm_models_provider_id, llm_models.model_id AS llm_models_model_id, llm_models.default_model_id AS llm_models_default_model_id, llm_models.model_type AS llm_models_model_type, llm_models.timeout AS llm_models_timeout, llm_models.max_retries AS llm_models_max_retries, llm_models.batch_size AS llm_models_batch_size, llm_models.retry_delay AS llm_models_retry_delay, llm_models.concurrency_limit AS llm_models_concurrency_limit, llm_models.stream AS llm_models_stream, llm_models.rate_limit AS llm_models_rate_limit, llm_models.is_default AS llm_models_is_default, llm_models.is_active AS llm_models_is_active, llm_models.created_at AS llm_models_created_at, llm_models.updated_at AS llm_models_updated_at 
FROM llm_models 
WHERE llm_models.provider_id = %(provider_id_1)s::UUID
2025-09-18 22:31:47,573 - sqlalchemy.engine.Engine - INFO - [cached since 918.2s ago] {'provider_id_1': UUID('7830c374-87a0-477c-b649-ecf2aae17677')}
2025-09-18 22:31:47,582 - llm.providers.watsonx - INFO - Initializing embeddings client with batch_size=3, concurrency_limit=1
2025-09-18 22:31:48,108 - sqlalchemy.engine.Engine - INFO - SELECT prompt_templates.id AS prompt_templates_id, prompt_templates.user_id AS prompt_templates_user_id, prompt_templates.name AS prompt_templates_name, prompt_templates.template_type AS prompt_templates_template_type, prompt_templates.system_prompt AS prompt_templates_system_prompt, prompt_templates.template_format AS prompt_templates_template_format, prompt_templates.input_variables AS prompt_templates_input_variables, prompt_templates.example_inputs AS prompt_templates_example_inputs, prompt_templates.context_strategy AS prompt_templates_context_strategy, prompt_templates.max_context_length AS prompt_templates_max_context_length, prompt_templates.stop_sequences AS prompt_templates_stop_sequences, prompt_templates.validation_schema AS prompt_templates_validation_schema, prompt_templates.is_default AS prompt_templates_is_default, prompt_templates.created_at AS prompt_templates_created_at, prompt_templates.updated_at AS prompt_templates_updated_at 
FROM prompt_templates 
WHERE prompt_templates.user_id = %(user_id_1)s::UUID AND prompt_templates.template_type = %(template_type_1)s
2025-09-18 22:31:48,108 - sqlalchemy.engine.Engine - INFO - [cached since 918.1s ago] {'user_id_1': UUID('1aa5093c-084e-4f20-905b-cf5e18301b1c'), 'template_type_1': 'RAG_QUERY'}
2025-09-18 22:31:48,109 - rag_solution.query_rewriting.query_rewriter - INFO - Starting query rewriting process for: How does IBM's business strategy work and what are the key components that drive their success?
2025-09-18 22:31:48,109 - rag_solution.query_rewriting.query_rewriter - INFO - Applying simple query expansion to: How does IBM's business strategy work and what are the key components that drive their success?
2025-09-18 22:31:48,109 - rag_solution.query_rewriting.query_rewriter - INFO - Expanded query: How does IBM's business strategy work and what are the key components that drive their success? AND (relevant OR important OR key)
2025-09-18 22:31:48,109 - rag_solution.query_rewriting.query_rewriter - INFO - Final rewritten query: How does IBM's business strategy work and what are the key components that drive their success? AND (relevant OR important OR key)
2025-09-18 22:31:48,993 - httpx - INFO - HTTP Request: POST https://us-south.ml.cloud.ibm.com/ml/v1/text/embeddings?version=2025-08-27 "HTTP/1.1 200 OK"
2025-09-18 22:31:49,005 - root - INFO - Query response: data: ['["id: 460905687422606761, distance: 0.6977970004081726, entity: {\'source\': \'Source.PDF\', \'page_number\': 99, \'chunk_number\': 0, \'document_name\': \'2022-ibm-annual-report.pdf\', \'document_id\': \'359ee79f-999e-4239-98fe-3f8a0ddf2018\', \'text\': \'Notes to Consolidated Financial Statements  International Business Machines Corporation and Subsidiary Companies                        97  \\\\n \\\\n \\\\nContingencies \\\\nAs a company with a substantial employee population and with clients in more than 175 countries, IBM is involved, either as plaintiff \\\\nor defendant, in a variety of ongoing claims, demands, suits, investigations, tax matters and proceedings\', \'chunk_id\': \'7a379964-e339-4fb0-b041-b6e923cf935d\'}", "id: 460905687422602618, distance: 0.6957675218582153, entity: {\'source\': \'Source.PDF\', \'page_number\': 120, \'chunk_number\': 0, \'document_name\': \'2020-ibm-annual-report.pdf\', \'document_id\': \'5096a93f-92e2-403e-a641-5fdfe8e99b6c\', \'text\': \'Notes to Consolidated Financial Statements  International Business Machines Corporation and Subsidiary Companies                        119\\\\n \\\\n \\\\nContingencies \\\\nAs a company with a substantial employee population and with clients in more than 175 countries, IBM is involved, either as plaintiff \\\\nor defendant, in a variety of ongoing claims, demands, suits, investigations, tax matters and proceedings \', \'chunk_id\': \'5cf86a63-ab8d-4910-89ab-befc72bd8c77\'}", "id: 460905687422609101, distance: 0.6795400977134705, entity: {\'source\': \'Source.PDF\', \'page_number\': 35, \'chunk_number\': 13, \'document_name\': \'2024-ibm-annual-report.pdf\', \'document_id\': \'8847ac05-266c-4fcb-b973-5bf72fa280e6\', \'text\': \'pand our ecosystem  and drive productivity across our business. We have made significant progress in becoming a higher growth, more focused business  that has delivered sustained revenue growth, strong cash generation and meaningful returns to all our stakeholders – our 2024  performance is a proof point of this progress. Today, IBM is a software-led, fully integrated platform company, a business \', \'chunk_id\': \'53e9e026-5e72-4c7d-9400-93bfda4a4fe9\'}", "id: 460905687422600824, distance: 0.6747317314147949, entity: {\'source\': \'Source.PDF\', \'page_number\': 5, \'chunk_number\': 10, \'document_name\': \'2020-ibm-annual-report.pdf\', \'document_id\': \'5096a93f-92e2-403e-a641-5fdfe8e99b6c\', \'text\': \' our shareholders, for your  support on our journey. \\\\nAs I look back, for me as for so many other IBMers, 2020  has put the spotlight on IBM’s essential role for our clients.  IBM is the backbone of some of the most critical systems  that keep the world running. Our technologies and services  help banks process credit card transactions, businesses  run supply chains, telcos connect customers, heal\', \'chunk_id\': \'14c1b956-5063-49cf-9be0-4fa039d97bbc\'}", "id: 460905687422605362, distance: 0.6713692545890808, entity: {\'source\': \'Source.PDF\', \'page_number\': 13, \'chunk_number\': 0, \'document_name\': \'2022-ibm-annual-report.pdf\', \'document_id\': \'359ee79f-999e-4239-98fe-3f8a0ddf2018\', \'text\': \'Management Discussion  International Business Machines Corporation and Subsidiary Companies                          11\\\\n \\\\n \\\\nDESCRIPTION OF BUSINESS \\\\nPlease refer to IBM’s Annual Report on Form 10-K filed with the SEC on February 28, 2023, for Item 1A. entitled “Risk Factors.” \\\\nIBM is addressing the hybrid cloud and AI opportunity with a platform-centric approach, focused on providing client value \', \'chunk_id\': \'9a5d3a54-a413-48df-97b4-9e42060eac06\'}"]']
2025-09-18 22:31:49,006 - rag_solution.retrieval.retriever - INFO - Received 5 documents for query: How does IBM's business strategy work and what are the key components that drive their success? AND (relevant OR important OR key)
2025-09-18 22:31:49,006 - services.pipeline - INFO - Retrieved 5 documents
2025-09-18 22:31:49,007 - sqlalchemy.engine.Engine - INFO - SELECT prompt_templates.id AS prompt_templates_id, prompt_templates.user_id AS prompt_templates_user_id, prompt_templates.name AS prompt_templates_name, prompt_templates.template_type AS prompt_templates_template_type, prompt_templates.system_prompt AS prompt_templates_system_prompt, prompt_templates.template_format AS prompt_templates_template_format, prompt_templates.input_variables AS prompt_templates_input_variables, prompt_templates.example_inputs AS prompt_templates_example_inputs, prompt_templates.context_strategy AS prompt_templates_context_strategy, prompt_templates.max_context_length AS prompt_templates_max_context_length, prompt_templates.stop_sequences AS prompt_templates_stop_sequences, prompt_templates.validation_schema AS prompt_templates_validation_schema, prompt_templates.is_default AS prompt_templates_is_default, prompt_templates.created_at AS prompt_templates_created_at, prompt_templates.updated_at AS prompt_templates_updated_at 
FROM prompt_templates 
WHERE prompt_templates.id = %(id_1)s::UUID 
 LIMIT %(param_1)s
2025-09-18 22:31:49,007 - sqlalchemy.engine.Engine - INFO - [cached since 789.7s ago] {'id_1': UUID('82a7b16e-17ab-4914-8154-eb27fd4f2348'), 'param_1': 1}
2025-09-18 22:31:49,008 - llm.providers.watsonx - INFO - Initializing ModelInference with max_retries=10, delay_time=0.500000
2025-09-18 22:31:49,775 - httpx - INFO - HTTP Request: GET https://us-south.ml.cloud.ibm.com/ml/v1/foundation_model_specs?version=2025-08-27&project_id=3f77f23d-71b7-426b-ae13-bc4710769880&filters=function_text_generation%2C%21lifecycle_withdrawn%3Aand&limit=200 "HTTP/1.1 200 OK"
2025-09-18 22:31:49,875 - llm.providers.watsonx - INFO - Model ID: ibm/granite-3-3-8b-instruct
2025-09-18 22:31:49,875 - llm.providers.watsonx - INFO - Model parameters: {'decoding_method': 'sample', 'max_new_tokens': 500, 'temperature': 0.3, 'top_k': 50, 'top_p': 1.0}
2025-09-18 22:31:53,884 - httpx - INFO - HTTP Request: POST https://us-south.ml.cloud.ibm.com/ml/v1/text/generation?version=2025-08-27 "HTTP/1.1 200 OK"
2025-09-18 22:31:53,885 - services.pipeline - INFO - Pipeline executed in 6.89 seconds
2025-09-18 22:31:53,885 - rag_solution.services.file_management_service - INFO - Fetching files for collection: e641b71c-fb41-4e3b-9ff3-e2be6ea88b73
2025-09-18 22:31:53,885 - sqlalchemy.engine.Engine - INFO - SELECT files.id AS files_id, files.user_id AS files_user_id, files.collection_id AS files_collection_id, files.filename AS files_filename, files.file_path AS files_file_path, files.file_type AS files_file_type, files.document_id AS files_document_id, files.file_metadata AS files_file_metadata, files.created_at AS files_created_at, files.updated_at AS files_updated_at 
FROM files 
WHERE files.collection_id = %(collection_id_1)s::UUID
2025-09-18 22:31:53,886 - sqlalchemy.engine.Engine - INFO - [cached since 790.1s ago] {'collection_id_1': UUID('e641b71c-fb41-4e3b-9ff3-e2be6ea88b73')}
2025-09-18 22:31:53,886 - rag_solution.services.file_management_service - INFO - Retrieved 5 files for collection e641b71c-fb41-4e3b-9ff3-e2be6ea88b73
2025-09-18 22:31:53,887 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-09-18 22:31:53,888 - rag_solution.file_management.database - INFO - Database session closed.
2025-09-18 22:32:38,136 - core.authentication_middleware - INFO - AuthMiddleware: Processing request to /api/health
2025-09-18 22:32:38,151 - core.authentication_middleware - INFO - AuthMiddleware: Mock user ready with ID: 1aa5093c-084e-4f20-905b-cf5e18301b1c
2025-09-18 22:32:38,152 - core.authentication_middleware - INFO - AuthMiddleware: Using created mock user UUID: 1aa5093c-084e-4f20-905b-cf5e18301b1c
2025-09-18 22:32:38,153 - rag_solution.file_management.database - INFO - === DATABASE DEPENDENCY DEBUG ===
2025-09-18 22:32:38,153 - rag_solution.file_management.database - INFO - get_db() called - creating database session
2025-09-18 22:32:38,153 - rag_solution.file_management.database - INFO - === END DATABASE DEPENDENCY DEBUG ===
2025-09-18 22:32:38,153 - rag_solution.file_management.database - INFO - Creating a new database session.
2025-09-18 22:32:38,160 - root - INFO - Connected to Milvus at milvus-standalone:19530
2025-09-18 22:32:38,160 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-09-18 22:32:38,161 - sqlalchemy.engine.Engine - INFO - Select 1
2025-09-18 22:32:38,161 - sqlalchemy.engine.Engine - INFO - [cached since 5386s ago] {}
2025-09-18 22:32:38,823 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-09-18 22:32:38,824 - rag_solution.file_management.database - INFO - Database session closed.
